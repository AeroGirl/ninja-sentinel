angular.module("ui.config",[]).value("ui.config",{}),angular.module("ui.filters",["ui.config"]),angular.module("ui.directives",["ui.config"]),angular.module("ui",["ui.filters","ui.directives","ui.config"]),angular.module("ui.directives").directive("uiSortable",["ui.config",function(a){var b;return b={},a.sortable!=null&&angular.extend(b,a.sortable),{require:"?ngModel",link:function(a,c,d,e){var f,g,h,i,j;return h=angular.extend({},b,a.$eval(d.uiOptions)),e!=null&&(f=function(a,b){return b.item.data("ui-sortable-start",b.item.index())},g=function(b,c){var d,f;return f=c.item.data("ui-sortable-start"),d=c.item.index(),e.$modelValue.splice(d,0,e.$modelValue.splice(f,1)[0]),a.$apply()},i=h.start,h.start=function(b,c){return f(b,c),typeof i=="function"&&i(b,c),a.$apply()},j=h.update,h.update=function(b,c){return g(b,c),typeof j=="function"&&j(b,c),a.$apply()}),c.sortable(h)}}}]),angular.module("ui.directives").directive("uiJq",["ui.config",function(a){return{restrict:"A",compile:function(b,c){if(!angular.isFunction(b[c.uiJq]))throw new Error('ui-jq: The "'+c.uiJq+'" function does not exist');var d=a.jq&&a.jq[c.uiJq];return function(a,b,c){var e=[],f="change";c.uiOptions?(e=a.$eval("["+c.uiOptions+"]"),angular.isObject(d)&&angular.isObject(e[0])&&(e[0]=angular.extend(d,e[0]))):d&&(e=[d]),c.ngModel&&b.is("select,input,textarea")&&(e&&angular.isObject(e[0])&&e[0].ngChange!==undefined&&(f=e[0].ngChange),f&&b.on(f,function(){b.trigger("input")})),b[c.uiJq].apply(b,e)}}}}]),angular.module("ui.directives").directive("uiEvent",["$parse",function(a){return function(b,c,d){var e=b.$eval(d.uiEvent);angular.forEach(e,function(d,e){var f=a(d);c.bind(e,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),b.$apply(function(){f(b,{$event:a,$params:c})})})})}}]),angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){var e=d.$viewValue||"";b.val(e),b.mask(a.$eval(c.uiMask))},d.$parsers.push(function(a){var c=b.isMaskValid()||angular.isUndefined(b.isMaskValid())&&b.val().length>0;return d.$setValidity("mask",c),c?a:undefined}),b.bind("keyup",function(){a.$apply(function(){d.$setViewValue(b.mask())})})}}}]),angular.module("ui.directives").directive("uiModal",["$timeout",function(a){return{restrict:"EAC",require:"ngModel",link:function(b,c,d,e){c.addClass("modal hide"),c.on("shown",function(){c.find("[autofocus]").focus()}),b.$watch(d.ngModel,function(a){c.modal(a&&"show"||"hide")}),c.on(jQuery.support.transition&&"shown"||"show",function(){a(function(){e.$setViewValue(!0)})}),c.on(jQuery.support.transition&&"hidden"||"hide",function(){a(function(){e.$setViewValue(!1)})})}}}]),angular.module("ui.directives").directive("uiReset",["ui.config",function(a){var b=null;return a.reset!==undefined&&(b=a.reset),{require:"ngModel",link:function(a,c,d,e){var f;f=angular.element('<a class="ui-reset" />'),c.wrap('<span class="ui-resetwrap" />').after(f),f.bind("click",function(c){c.preventDefault(),a.$apply(function(){d.uiReset?e.$setViewValue(a.$eval(d.uiReset)):e.$setViewValue(b),e.$render()})})}}}]),function(){function b(a,b,c,d){angular.forEach(b.split(" "),function(b){var e={type:"map-"+b};google.maps.event.addListener(c,b,function(b){d.trigger(angular.extend({},e,b)),a.$$phase||a.$apply()})})}function c(c,d){a.directive(c,[function(){return{restrict:"A",link:function(a,e,f){a.$watch(f[c],function(c){b(a,d,c,e)})}}}])}var a=angular.module("ui.directives");a.directive("uiMap",["ui.config","$parse",function(a,c){var d="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",e=a.map||{};return{restrict:"A",link:function(a,f,g){var h=angular.extend({},e,a.$eval(g.uiOptions)),i=new google.maps.Map(f[0],h),j=c(g.uiMap);j.assign(a,i),b(a,d,i,f)}}}]),a.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(a,c,d){var e="closeclick content_change domready position_changed zindex_changed",f=a.mapInfoWindow||{};return{link:function(a,g,h){var i=angular.extend({},f,a.$eval(h.uiOptions));i.content=g[0];var j=c(h.uiMapInfoWindow),k=j(a);k||(k=new google.maps.InfoWindow(i),j.assign(a,k)),b(a,e,k,g),g.replaceWith("<div></div>");var l=k.open;k.open=function(c,e,f,h,i,j){d(g.contents())(a),l.call(k,c,e,f,h,i,j)}}}}]),c("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),c("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),c("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),c("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),c("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),c("uiMapGroundOverlay","click dblclick")}(),angular.module("ui.directives").factory("keypressHelper",["$parse",function(b){var c={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},d=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(a,e,f,g){var h,i=[];h=e.$eval(g["ui"+d(a)]),angular.forEach(h,function(a,c){var d,e;e=b(a),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(a,function(b){var d=b.metaKey||b.altKey,f=b.ctrlKey,g=b.shiftKey,h=b.keyCode;a==="keypress"&&!g&&h>=97&&h<=122&&(h-=32),angular.forEach(i,function(a){var h=a.keys[c[b.keyCode]]||a.keys[b.keyCode.toString()]||!1,i=a.keys.alt||!1,j=a.keys.ctrl||!1,k=a.keys.shift||!1;h&&i==d&&j==f&&k==g&&e.$apply(function(){a.expression(e,{$event:b})})})})}}]),angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(a){return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(a){return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(a){return{link:function(b,c,d){a("keyup",b,c,d)}}}]),angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f=c.uiValidate;f=a.$eval(f);if(!f)return;angular.isFunction(f)&&(f={validator:f}),angular.forEach(f,function(a,b){e=function(c){return a(c)?(d.$setValidity(b,!0),c):(d.$setValidity(b,!1),undefined)},d.$formatters.push(e),d.$parsers.push(e)})}}}),angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(a,b){var c={};return angular.isString(a.animate)?c["class"]=a.animate:a.animate&&(c=a.animate),{restrict:"A",link:function(a,d,e){var f={};e.uiAnimate&&(f=a.$eval(e.uiAnimate),angular.isString(f)&&(f={"class":f})),f=angular.extend({"class":"ui-animate"},c,f),d.addClass(f["class"]),b(function(){d.removeClass(f["class"])},20,!1)}}}]),angular.module("ui.directives").directive("uiSelect2",["ui.config","$http",function(a,b){var c={};return a.select2&&angular.extend(c,a.select2),{require:"?ngModel",compile:function(a,b){var d,e,f,g=a.is("select"),h=b.multiple!==undefined;return a.is("select")&&(e=a.find("option[ng-repeat], option[data-ng-repeat]"),e.length&&(f=e.attr("ng-repeat")||e.attr("data-ng-repeat"),d=jQuery.trim(f.split("|")[0]).split(" ").pop())),function(a,b,e,f){var i=angular.extend({},c,a.$eval(e.uiSelect2));g?(delete i.multiple,delete i.initSelection):h&&(i.multiple=!0);if(f){f.$render=function(){g?b.select2("val",f.$modelValue):h&&!f.$modelValue?b.select2("data",[]):b.select2("data",f.$modelValue)},d&&a.$watch(d,function(a,c,d){if(!a)return;setTimeout(function(){b.select2("val",f.$viewValue),b.trigger("change")})});if(!g){b.bind("change",function(){a.$apply(function(){f.$setViewValue(b.select2("data"))})});if(i.initSelection){var j=i.initSelection;i.initSelection=function(a,b){j(a,function(a){f.$setViewValue(a),b(a)})}}}}e.$observe("disabled",function(a){b.select2(a&&"disable"||"enable")}),a.$watch(e.ngMultiple,function(a){b.select2(i)}),b.val(a.$eval(e.ngModel)),setTimeout(function(){b.select2(i)})}}}}]),angular.module("ui.directives").directive("uiCodemirror",["ui.config","$parse",function(a,b){return"use strict",a.codemirror=a.codemirror||{},{require:"ngModel",link:function(c,d,e,f){if(!d.is("textarea"))throw new Error("ui-codemirror can only be applied to a textarea element");var g,h=b(e.uiCodemirror),i=function(a){var b=a.getValue();b!==f.$viewValue&&(f.$setViewValue(b),c.$apply())},j=function(b){b=angular.extend({},b,a.codemirror);var c=b.onChange;c?b.onChange=function(a){i(a),c(a)}:b.onChange=i,g&&g.toTextArea(),g=CodeMirror.fromTextArea(d[0],b)};j(h()),c.$watch(h,j,!0),f.$formatters.push(function(a){if(angular.isUndefined(a)||a===null)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),f.$render=function(){g.setValue(f.$viewValue)}}}}]),angular.module("ui.directives").directive("uiTinymce",["ui.config",function(a){return a.tinymce=a.tinymce||{},{require:"ngModel",link:function(b,c,d,e){var f,g={onchange_callback:function(a){a.isDirty()&&(a.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply())},handle_event_callback:function(a){return this.isDirty()&&(this.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply()),!0},setup:function(a){a.onSetContent.add(function(a,d){a.isDirty()&&(a.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply())})}};d.uiTinymce?f=b.$eval(d.uiTinymce):f={},angular.extend(g,a.tinymce,f),setTimeout(function(){c.tinymce(g)})}}}]),angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){b[0].doNotMove=!0;var e=d.uiIf,f,g;a.$watch(e,function(d){f&&(f.remove(),f=null),g&&(g.$destroy(),g=null),d&&(g=a.$new(),c(g,function(a){f=a,b.after(a)})),b.parent().trigger("$childrenChanged")})}}}}]),angular.module("ui.directives").directive("uiScrollfix",["$window",function(a){return"use strict",{link:function(b,c,d){var e=c.offset().top;d.uiScrollfix?d.uiScrollfix.charAt(0)==="-"?d.uiScrollfix=e-d.uiScrollfix.substr(1):d.uiScrollfix.charAt(0)==="+"&&(d.uiScrollfix=e+parseFloat(d.uiScrollfix.substr(1))):d.uiScrollfix=e,angular.element(a).on("scroll.ui-scrollfix",function(){var b;if(angular.isDefined(a.pageYOffset))b=a.pageYOffset;else{var e=document.compatMode&&document.compatMode!=="BackCompat"?document.documentElement:document.body;b=e.scrollTop}!c.hasClass("ui-scrollfix")&&b>d.uiScrollfix?c.addClass("ui-scrollfix"):c.hasClass("ui-scrollfix")&&b<d.uiScrollfix&&c.removeClass("ui-scrollfix")})}}}]),angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(a,b){return a.uiCalendar=a.uiCalendar||{},{require:"ngModel",restrict:"A",scope:{events:"=ngModel"},link:function(c,d,e){function g(){var b,f={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},eventMouseover:function(a,b,c){c.name!=="agendaDay"&&$(b.target).attr("title",a.title)},events:c.events};e.uiCalendar?b=c.$eval(e.uiCalendar):b={},angular.extend(f,a.uiCalendar,b),d.html("").fullCalendar(f)}var f=b(e.ngModel);g(),c.$watch("events.length",function(a,b){g()},!0)}}}]),angular.module("ui.directives").directive("uiShow",[function(){return function(a,b,c){a.$watch(c.uiShow,function(a,c){a?b.addClass("ui-show"):b.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(a,b,c){a.$watch(c.uiHide,function(a,c){a?b.addClass("ui-hide"):b.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(a,b,c){a.$watch(c.uiToggle,function(a,c){a?b.removeClass("ui-hide").addClass("ui-show"):b.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(a,b){var c={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};return a.currency&&angular.extend(c,a.currency),{restrict:"EAC",require:"ngModel",link:function(a,d,e,f){var g,h,i;g=angular.extend({},c,a.$eval(e.uiCurrency)),h=function(a){var c;return c=a*1,c>0?d.addClass(g.pos):d.removeClass(g.pos),c<0?d.addClass(g.neg):d.removeClass(g.neg),c===0?d.addClass(g.zero):d.removeClass(g.zero),a===""?d.text(""):d.text(b(c,g.symbol)),!0},f.$render=function(){i=f.$viewValue,d.val(i),h(i)}}}}]),angular.module("ui.directives").directive("uiDate",["ui.config",function(a){"use strict";var b;return b={},angular.isObject(a.date)&&angular.extend(b,a.date),{require:"?ngModel",link:function(b,c,d,e){var f=function(){return angular.extend({},a.date,b.$eval(d.uiDate))},g=function(){var a=f();if(e){var d=function(){b.$apply(function(){var a=c.datepicker("getDate");c.datepicker("setDate",c.val()),e.$setViewValue(a)})};if(a.onSelect){var g=a.onSelect;a.onSelect=function(a,b){return d(),g(a,b)}}else a.onSelect=d;c.bind("change",d),e.$render=function(){var a=e.$viewValue;if(angular.isDefined(a)&&a!==null&&!angular.isDate(a))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");c.datepicker("setDate",a)}}c.datepicker("destroy"),c.datepicker(a),e.$render()};b.$watch(f,g,!0)}}}]).directive("uiDateFormat",[function(){var a={require:"ngModel",link:function(a,b,c,d){if(c.uiDateFormat==="")d.$formatters.push(function(a){if(angular.isString(a))return new Date(a)}),d.$parsers.push(function(a){if(a)return a.toISOString()});else{var e=c.uiDateFormat;d.$formatters.push(function(a){if(angular.isString(a))return $.datepicker.parseDate(e,a)}),d.$parsers.push(function(a){if(a)return $.datepicker.formatDate(e,a)})}}};return a}]),angular.module("ui.filters").filter("highlight",function(){return function(a,b,c){return b||angular.isNumber(b)?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}}),angular.module("ui.filters").filter("format",function(){return function(a,b){if(!a)return a;var c=a.toString(),d;return b===undefined?c:!angular.isArray(b)&&!angular.isObject(b)?c.split("$0").join(b):(d=angular.isArray(b)&&"$"||":",angular.forEach(b,function(a,b){c=c.split(d+b).join(a)}),c)}}),angular.module("ui.filters").filter("unique",function(){return function(a,b){if(b===!1)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var c={},d=[],e=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};angular.forEach(a,function(a){var b,c=!1;for(var f=0;f<d.length;f++)if(angular.equals(e(d[f]),e(a))){c=!0;break}c||d.push(a)}),a=d}return a}}),angular.module("ui.filters").filter("inflector",function(){function a(a){return a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function b(a,b){return a.replace(/[A-Z]/g,function(a){return b+a})}var c={humanize:function(c){return a(b(c," ").split("_").join(" "))},underscore:function(a){return a.substr(0,1).toLowerCase()+b(a.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(b){return b=b.substr(0,1).toLowerCase()+a(b.split("_").join(" ")).substr(1).split(" ").join(""),b}};return function(a,b,d){return b!==!1&&angular.isString(a)?(b=b||"humanize",c[b](a)):a}}),function(a){typeof define=="function"&&define.amd?define(["jquery"],a):a(jQuery)}(function(a,b){function k(a){function e(a){c?(b(),g(e),d=!0,c=!1):d=!1}var b=a,c=!1,d=!1;this.kick=function(a){c=!0,d||e()},this.end=function(a){var e=b;if(!a)return;d?(b=c?function(){e(),a()}:a,c=!0):a()}}function l(){return!0}function m(){return!1}function n(a){a.preventDefault()}function o(a){if(h[a.target.tagName.toLowerCase()])return;a.preventDefault()}function p(a){return a.which===1&&!a.ctrlKey&&!a.altKey}function q(a,b){var c,d;if(a.identifiedTouch)return a.identifiedTouch(b);c=-1,d=a.length;while(++c<d)if(a[c].identifier===b)return a[c]}function r(a,b){var c=q(a.changedTouches,b.identifier);if(!c)return;if(c.pageX===b.pageX&&c.pageY===b.pageY)return;return c}function s(a){var b;if(!p(a))return;b={target:a.target,startX:a.pageX,startY:a.pageY,timeStamp:a.timeStamp},d(document,i.move,t,b),d(document,i.cancel,u,b)}function t(a){var b=a.data;A(a,b,a,v)}function u(a){v()}function v(){e(document,i.move,t),e(document,i.cancel,v)}function w(a){var b,c;if(h[a.target.tagName.toLowerCase()])return;b=a.changedTouches[0],c={target:b.target,startX:b.pageX,startY:b.pageY,timeStamp:a.timeStamp,identifier:b.identifier},d(document,j.move+"."+b.identifier,x,c),d(document,j.cancel+"."+b.identifier,y,c)}function x(a){var b=a.data,c=r(a,b);if(!c)return;A(a,b,c,z)}function y(a){var b=a.data,c=q(a.changedTouches,b.identifier);if(!c)return;z(b.identifier)}function z(a){e(document,"."+a,x),e(document,"."+a,y)}function A(a,b,d,e){var f=d.pageX-b.startX,g=d.pageY-b.startY;if(f*f+g*g<c*c)return;D(a,b,d,f,g,e)}function B(){return this._handled=l,!1}function C(a){a._handled()}function D(a,b,c,d,e,g){var h=b.target,i,j;i=a.targetTouches,j=a.timeStamp-b.timeStamp,b.type="movestart",b.distX=d,b.distY=e,b.deltaX=d,b.deltaY=e,b.pageX=c.pageX,b.pageY=c.pageY,b.velocityX=d/j,b.velocityY=e/j,b.targetTouches=i,b.finger=i?i.length:1,b._handled=B,b._preventTouchmoveDefault=function(){a.preventDefault()},f(b.target,b),g(b.identifier)}function E(a){var b=a.data.event,c=a.data.timer;K(b,a,a.timeStamp,c)}function F(a){var b=a.data.event,c=a.data.timer;G(),L(b,c,function(){setTimeout(function(){e(b.target,"click",m)},0)})}function G(a){e(document,i.move,E),e(document,i.end,F)}function H(a){var b=a.data.event,c=a.data.timer,d=r(a,b);if(!d)return;a.preventDefault(),b.targetTouches=a.targetTouches,K(b,d,a.timeStamp,c)}function I(a){var b=a.data.event,c=a.data.timer,d=q(a.changedTouches,b.identifier);if(!d)return;J(b),L(b,c)}function J(a){e(document,"."+a.identifier,H),e(document,"."+a.identifier,I)}function K(a,b,c,d){var e=c-a.timeStamp;a.type="move",a.distX=b.pageX-a.startX,a.distY=b.pageY-a.startY,a.deltaX=b.pageX-a.pageX,a.deltaY=b.pageY-a.pageY,a.velocityX=.3*a.velocityX+.7*a.deltaX/e,a.velocityY=.3*a.velocityY+.7*a.deltaY/e,a.pageX=b.pageX,a.pageY=b.pageY,d.kick()}function L(a,b,c){b.end(function(){return a.type="moveend",f(a.target,a),c&&c()})}function M(a,b,c){return d(this,"movestart.move",C),!0}function N(a){return e(this,"dragstart drag",n),e(this,"mousedown touchstart",o),e(this,"movestart",C),!0}function O(a){if(a.namespace==="move"||a.namespace==="moveend")return;d(this,"dragstart."+a.guid+" drag."+a.guid,n,b,a.selector),d(this,"mousedown."+a.guid,o,b,a.selector)}function P(a){if(a.namespace==="move"||a.namespace==="moveend")return;e(this,"dragstart."+a.guid+" drag."+a.guid),e(this,"mousedown."+a.guid)}var c=6,d=a.event.add,e=a.event.remove,f=function(b,c,d){a.event.trigger(c,d,b)},g=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(function(){a()},25)}}(),h={textarea:!0,input:!0,select:!0,button:!0},i={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},j={move:"touchmove",cancel:"touchend",end:"touchend"};a.event.special.movestart={setup:M,teardown:N,add:O,remove:P,_default:function(a){var c,e;if(!a._handled())return;c={target:a.target,startX:a.startX,startY:a.startY,pageX:a.pageX,pageY:a.pageY,distX:a.distX,distY:a.distY,deltaX:a.deltaX,deltaY:a.deltaY,velocityX:a.velocityX,velocityY:a.velocityY,timeStamp:a.timeStamp,identifier:a.identifier,targetTouches:a.targetTouches,finger:a.finger},e={event:c,timer:new k(function(b){f(a.target,c)})},a.identifier===b?(d(a.target,"click",m),d(document,i.move,E,e),d(document,i.end,F,e)):(a._preventTouchmoveDefault(),d(document,j.move+"."+a.identifier,H,e),d(document,j.end+"."+a.identifier,I,e))}},a.event.special.move={setup:function(){d(this,"movestart.move",a.noop)},teardown:function(){e(this,"movestart.move",a.noop)}},a.event.special.moveend={setup:function(){d(this,"movestart.moveend",a.noop)},teardown:function(){e(this,"movestart.moveend",a.noop)}},d(document,"mousedown.move",s),d(document,"touchstart.move",w),typeof Array.prototype.indexOf=="function"&&function(a,b){var c=["changedTouches","targetTouches"],d=c.length;while(d--)a.event.props.indexOf(c[d])===-1&&a.event.props.push(c[d])}(a)}),function(a){typeof define=="function"&&define.amd?define(["jquery"],a):a(jQuery)}(function(a,b){function g(a){var b,c,d;b=a.target.offsetWidth,c=a.target.offsetHeight,d={distX:a.distX,distY:a.distY,velocityX:a.velocityX,velocityY:a.velocityY,finger:a.finger};if(a.distX>a.distY){if(a.distX>-a.distY){if(a.distX/b>f.threshold||a.velocityX*a.distX/b*f.sensitivity>1)d.type="swiperight",e(a.currentTarget,d)}else if(-a.distY/c>f.threshold||a.velocityY*a.distY/b*f.sensitivity>1)d.type="swipeup",e(a.currentTarget,d)}else if(a.distX>-a.distY){if(a.distY/c>f.threshold||a.velocityY*a.distY/b*f.sensitivity>1)d.type="swipedown",e(a.currentTarget,d)}else if(-a.distX/b>f.threshold||a.velocityX*a.distX/b*f.sensitivity>1)d.type="swipeleft",e(a.currentTarget,d)}function h(b){var c=a.data(b,"event_swipe");return c||(c={count:0},a.data(b,"event_swipe",c)),c}var c=a.event.add,d=a.event.remove,e=function(b,c,d){a.event.trigger(c,d,b)},f={threshold:.4,sensitivity:6};a.event.special.swipe=a.event.special.swipeleft=a.event.special.swiperight=a.event.special.swipeup=a.event.special.swipedown={setup:function(a,b,d){var a=h(this);if(a.count++>0)return;return c(this,"moveend",g),!0},teardown:function(){var a=h(this);if(--a.count>0)return;return d(this,"moveend",g),!0},settings:f}}),function(a,b,c){function j(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function k(a,d){var e=this,f=c(e);if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id"));if(a===!0)return f[0].value=d;f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function l(){var a,b=this,d=c(b),e=d,f=this.id;if(b.value==""){if(b.type=="password"){if(!d.data("placeholder-textinput")){try{a=d.clone().attr({type:"text"})}catch(g){a=c("<input>").attr(c.extend(j(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":f}).bind("focus.placeholder",k),d.data({"placeholder-textinput":a,"placeholder-id":f}).before(a)}d=d.removeAttr("id").hide().prev().attr("id",f).show()}d.addClass("placeholder"),d[0].value=d.attr("placeholder")}else d.removeClass("placeholder")}var d="placeholder"in b.createElement("input"),e="placeholder"in b.createElement("textarea"),f=c.fn,g=c.valHooks,h,i;d&&e?(i=f.placeholder=function(){return this},i.input=i.textarea=!0):(i=f.placeholder=function(){var a=this;return a.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":k,"blur.placeholder":l}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},i.input=d,i.textarea=e,h={get:function(a){var b=c(a);return b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var e=c(a);return e.data("placeholder-enabled")?(d==""?(a.value=d,a!=b.activeElement&&l.call(a)):e.hasClass("placeholder")?k.call(a,!0,d)||(a.value=d):a.value=d,e):a.value=d}},d||(g.input=h),e||(g.textarea=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(k);setTimeout(function(){a.each(l)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(a,b,c){"use strict",a.fn.foundationNavigation=function(b){var c=!1;Modernizr.touch||navigator.userAgent.match(/Windows Phone/i)?(a(document).on("click.fndtn touchstart.fndtn",".nav-bar a.flyout-toggle",function(b){b.preventDefault();var d=a(this).siblings(".flyout").first();c===!1&&(a(".nav-bar .flyout").not(d).slideUp(500),d.slideToggle(500,function(){c=!1})),c=!0}),a(".nav-bar>li.has-flyout",this).addClass("is-touch")):a(".nav-bar>li.has-flyout",this).on("mouseenter mouseleave",function(b){b.type=="mouseenter"&&(a(".nav-bar").find(".flyout").hide(),a(this).children(".flyout").show());if(b.type=="mouseleave"){var c=a(this).children(".flyout"),d=c.find("input"),e=function(b){var c;return b.length>0?(b.each(function(){a(this).is(":focus")&&(c=!0)}),c):!1};e(d)||a(this).children(".flyout").hide()}})}}(jQuery,this),function(a,b,c){"use strict";var d={index:0,initialized:!1},e={reset:function(){return d.$topbar.find(".moved").removeClass("moved"),d.$section.removeAttr("style"),d.index=0,!0},init:function(c){return this.each(function(){d=a.extend(d,c),d.$w=a(b),d.$topbar=a("nav.top-bar"),d.$section=d.$topbar.find("section"),d.$titlebar=d.$topbar.children("ul:first");var f=a("<div class='top-bar-js-breakpoint'/>").appendTo("body");d.breakPoint=f.width(),f.remove(),d.initialized||(e.assemble(),d.initialized=!0),d.height||e.largestUL(),d.$topbar.parent().hasClass("fixed")&&a("body").css("padding-top",d.$topbar.outerHeight()),a(".top-bar .toggle-topbar").die("click.fndtn").live("click.fndtn",function(a){a.preventDefault(),e.breakpoint()&&(d.$topbar.toggleClass("expanded"),d.$topbar.css("min-height","")),d.$topbar.hasClass("expanded")||(d.$section.css({left:"0%"}),d.$section.find(">.name").css({left:"100%"}),d.$section.find("li.moved").removeClass("moved"),d.index=0)}),a(".top-bar .has-dropdown>a").die("click.fndtn").live("click.fndtn",function(b){(Modernizr.touch||e.breakpoint())&&b.preventDefault();if(e.breakpoint()){var c=a(this),f=c.closest("li");d.index+=1,f.addClass("moved"),d.$section.css({left:-(100*d.index)+"%"}),d.$section.find(">.name").css({left:100*d.index+"%"}),c.siblings("ul").height(d.height+d.$titlebar.outerHeight(!0)),d.$topbar.css("min-height",d.height+d.$titlebar.outerHeight(!0)*2)}}),a(b).on("resize.fndtn.topbar",function(){e.breakpoint()||d.$topbar.css("min-height","")}),a(".top-bar .has-dropdown .back").die("click.fndtn").live("click.fndtn",function(b){b.preventDefault();var c=a(this),e=c.closest("li.moved"),f=e.parent();d.index-=1,d.$section.css({left:-(100*d.index)+"%"}),d.$section.find(">.name").css({left:100*d.index+"%"}),d.index===0&&d.$topbar.css("min-height",0),setTimeout(function(){e.removeClass("moved")},300)})})},breakpoint:function(){return d.$w.width()<d.breakPoint},assemble:function(){d.$section.detach(),d.$section.find(".has-dropdown>a").each(function(){var b=a(this),c=b.siblings(".dropdown"),d=a('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');d.find("h5>a").html(b.html()),c.prepend(d)}),d.$section.appendTo(d.$topbar)},largestUL:function(){var b=d.$topbar.find("section ul ul"),c=b.first(),e=0;b.each(function(){a(this).children("li").length>c.children("li").length&&(c=a(this))}),c.children("li").each(function(){e+=a(this).outerHeight(!0)}),d.height=e}};a.fn.foundationTopBar=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return e.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.foundationTopBar")}}(jQuery,this),function(a,b,c){"use strict";var d=a(document),e=b.Modernizr;a(document).ready(function(){a.fn.foundationAlerts?d.foundationAlerts():null,a.fn.foundationButtons?d.foundationButtons():null,a.fn.foundationAccordion?d.foundationAccordion():null,a.fn.foundationNavigation?d.foundationNavigation():null,a.fn.foundationTopBar?d.foundationTopBar():null,a.fn.foundationCustomForms?d.foundationCustomForms():null,a.fn.foundationMediaQueryViewer?d.foundationMediaQueryViewer():null,a.fn.foundationTabs?d.foundationTabs({callback:a.foundation.customForms.appendCustomMarkup}):null,a.fn.foundationTooltips?d.foundationTooltips():null,a.fn.foundationMagellan?d.foundationMagellan():null,a.fn.foundationClearing?d.foundationClearing():null,a.fn.placeholder?a("input, textarea").placeholder():null}),e.touch&&!b.location.hash&&a(b).load(function(){setTimeout(function(){b.scrollTo(0,1)},0)})}(jQuery,this),function(a,b){function e(b,c){var d,e,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,e=d.name,!b.href||!e||d.nodeName.toLowerCase()!=="map"?!1:(g=a("img[usemap=#"+e+"]")[0],!!g&&f(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&f(b)}function f(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return a.css(this,"visibility")==="hidden"}).length}var c=0,d=/^ui-id-\d+$/;a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){d.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return e(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&e(b,!d)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),f&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1,a.ui.ie6=parseFloat(b[1],10)===6}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(!e||!a.element[0].parentNode||a.element[0].parentNode.nodeType===11)return;for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}(jQuery),jQuery.effects||function(a,b){var c=a.uiBackCompat!==!1,d="ui-effects-";a.effects={effect:{}},function(b,c){function n(a,b,c){var d=i[b.type]||{};return a==null?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function o(a){var c=g(),d=c._rgba=[];return a=a.toLowerCase(),m(f,function(b,e){var f,g=e.re.exec(a),i=g&&e.parse(g),j=e.space||"rgba";if(i)return f=c[j](i),c[h[j].cache]=f[h[j].cache],d=c._rgba=f._rgba,!1}),d.length?(d.join()==="0,0,0,0"&&b.extend(d,l.transparent),c):l[a]}function p(a,b,c){return c=(c+1)%1,c*6<1?a+(b-a)*c*6:c*2<1?b:c*3<2?a+(b-a)*(2/3-c)*6:a}var d="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),e=/^([\-+])=\s*(\d+\.?\d*)/,f=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],g=b.Color=function(a,c,d,e){return new b.Color.fn.parse(a,c,d,e)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},i={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},j=g.support={},k=b("<p>")[0],l,m=b.each;k.style.cssText="background-color:rgba(1,1,1,.5)",j.rgba=k.style.backgroundColor.indexOf("rgba")>-1,m(h,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),g.fn=b.extend(g.prototype,{parse:function(d,e,f,i){if(d===c)return this._rgba=[null,null,null,null],this;if(d.jquery||d.nodeType)d=b(d).css(e),e=c;var j=this,k=b.type(d),p=this._rgba=[];e!==c&&(d=[d,e,f,i],k="array");if(k==="string")return this.parse(o(d)||l._default);if(k==="array")return m(h.rgba.props,function(a,b){p[b.idx]=n(d[b.idx],b)}),this;if(k==="object")return d instanceof g?m(h,function(a,b){d[b.cache]&&(j[b.cache]=d[b.cache].slice())}):m(h,function(b,c){var e=c.cache;m(c.props,function(a,b){if(!j[e]&&c.to){if(a==="alpha"||d[a]==null)return;j[e]=c.to(j._rgba)}j[e][b.idx]=n(d[a],b,!0)}),j[e]&&a.inArray(null,j[e].slice(0,3))<0&&(j[e][3]=1,c.from&&(j._rgba=c.from(j[e])))}),this},is:function(a){var b=g(a),c=!0,d=this;return m(h,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],m(e.props,function(a,b){if(g[b.idx]!=null)return c=g[b.idx]===f[b.idx],c})),c}),c},_space:function(){var a=[],b=this;return m(h,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=g(a),d=c._space(),e=h[d],f=this.alpha()===0?g("transparent"):this,j=f[e.cache]||e.to(f._rgba),k=j.slice();return c=c[e.cache],m(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],h=i[d.type]||{};if(g===null)return;f===null?k[e]=g:(h.mod&&(g-f>h.mod/2?f+=h.mod:f-g>h.mod/2&&(f-=h.mod)),k[e]=n((g-f)*b+f,d))}),this[d](k)},blend:function(a){if(this._rgba[3]===1)return this;var c=this._rgba.slice(),d=c.pop(),e=g(a)._rgba;return g(b.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});return c[3]===1&&(c.pop(),a="rgb("),a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,b){return a==null&&(a=b>2?1:0),b&&b<3&&(a=Math.round(a*100)+"%"),a});return c[3]===1&&(c.pop(),a="hsl("),a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),d=c.pop();return a&&c.push(~~(d*255)),"#"+b.map(c,function(a){return a=(a||0).toString(16),a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),g.fn.parse.prototype=g.fn,h.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=i*.5,k,l;return g===f?k=0:b===f?k=60*(c-d)/h+360:c===f?k=60*(d-b)/h+120:k=60*(b-c)/h+240,j===0||j===1?l=j:j<=.5?l=h/i:l=h/(2-i),[Math.round(k)%360,l,j,e==null?1:e]},h.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=d<=.5?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(p(g,f,b+1/3)*255),Math.round(p(g,f,b)*255),Math.round(p(g,f,b-1/3)*255),e]},m(h,function(a,d){var f=d.props,h=d.cache,i=d.to,j=d.from;g.fn[a]=function(a){i&&!this[h]&&(this[h]=i(this._rgba));if(a===c)return this[h].slice();var d,e=b.type(a),k=e==="array"||e==="object"?a:arguments,l=this[h].slice();return m(f,function(a,b){var c=k[e==="object"?a:b.idx];c==null&&(c=l[b.idx]),l[b.idx]=n(c,b)}),j?(d=g(j(l)),d[h]=l,d):g(l)},m(f,function(c,d){if(g.fn[c])return;g.fn[c]=function(f){var g=b.type(f),h=c==="alpha"?this._hsla?"hsla":"rgba":a,i=this[h](),j=i[d.idx],k;return g==="undefined"?j:(g==="function"&&(f=f.call(this,j),g=b.type(f)),f==null&&d.empty?this:(g==="string"&&(k=e.exec(f),k&&(f=j+parseFloat(k[2])*(k[1]==="+"?1:-1))),i[d.idx]=f,this[h](i)))}})}),m(d,function(a,c){b.cssHooks[c]={set:function(a,d){var e,f,h="";if(b.type(d)!=="string"||(e=o(d))){d=g(e||d);if(!j.rgba&&d._rgba[3]!==1){f=c==="backgroundColor"?a.parentNode:a;while((h===""||h==="transparent")&&f&&f.style)try{h=b.css(f,"backgroundColor"),f=f.parentNode}catch(i){}d=d.blend(h&&h!=="transparent"?h:"_default")}d=d.toRgbaString()}try{a.style[c]=d}catch(k){}}},b.fx.step[c]=function(a){a.colorInit||(a.start=g(a.elem,c),a.end=g(a.end),a.colorInit=!0),b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}}),b.cssHooks.borderColor={expand:function(a){var b={};return m(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},l=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function e(){var b=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},d,e;if(b&&b.length&&b[0]&&b[b[0]]){e=b.length;while(e--)d=b[e],typeof b[d]=="string"&&(c[a.camelCase(d)]=b[d])}else for(d in b)typeof b[d]=="string"&&(c[d]=b[d]);return c}function f(b,c){var e={},f,g;for(f in c)g=c[f],b[f]!==g&&!d[f]&&(a.fx.step[f]||!isNaN(parseFloat(g)))&&(e[f]=g);return e}var c=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){if(a.end!=="none"&&!a.setAttr||a.pos===1&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}}),a.effects.animateClass=function(b,d,g,h){var i=a.speed(d,g,h);return this.queue(function(){var d=a(this),g=d.attr("class")||"",h,j=i.children?d.find("*").andSelf():d;j=j.map(function(){var b=a(this);return{el:b,start:e.call(this)}}),h=function(){a.each(c,function(a,c){b[c]&&d[c+"Class"](b[c])})},h(),j=j.map(function(){return this.end=e.call(this.el[0]),this.diff=f(this.start,this.end),this}),d.attr("class",g),j=j.map(function(){var b=this,c=a.Deferred(),d=jQuery.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){h(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(d[0])})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.call(this,{add:b},c,d,e):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.call(this,{remove:b},c,d,e):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):this._toggleClass(c,d):a.effects.animateClass.call(this,{toggle:c},d,e,f)},switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function e(b,c,d,e){a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},c==null&&(c={}),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function f(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects.effect[b]?c&&a.effects[b]?!1:!0:!1}a.extend(a.effects,{version:"1.9.2",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data(d+b[c],a[0].style[b[c]])},restore:function(a,c){var e,f;for(f=0;f<c.length;f++)c[f]!==null&&(e=a.data(d+c[f]),e===b&&(e=""),a.css(c[f],e))},setMode:function(a,b){return b==="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),b.css("position")==="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function i(c){function h(){a.isFunction(e)&&e.call(d[0]),a.isFunction(c)&&c()}var d=a(this),e=b.complete,f=b.mode;(d.is(":hidden")?f==="hide":f==="show")?h():g.call(d[0],b,h)}var b=e.apply(this,arguments),d=b.mode,f=b.queue,g=a.effects.effect[b.effect],h=!g&&c&&a.effects[b.effect];return a.fx.off||!g&&!h?d?this[d](b.duration,b.complete):this.each(function(){b.complete&&b.complete.call(this)}):g?f===!1?this.each(i):this.queue(f||"fx",i):h.call(this,{options:b,duration:b.duration,callback:b.complete,mode:b.mode})},_show:a.fn.show,show:function(a){if(f(a))return this._show.apply(this,arguments);var b=e.apply(this,arguments);return b.mode="show",this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(f(a))return this._hide.apply(this,arguments);var b=e.apply(this,arguments);return b.mode="hide",this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(f(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=e.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){var b,c=4;while(a<((b=Math.pow(2,--c))-1)/11);return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return a<.5?c(a*2)/2:1-c(a*-2+2)/2}})}()}(jQuery),function(a,b){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};f==="hide"&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){f==="hide"&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),angular.module("ui.config",[]).value("ui.config",{}),angular.module("ui.filters",["ui.config"]),angular.module("ui.directives",["ui.config"]),angular.module("ui",["ui.filters","ui.directives","ui.config"]),angular.module("ui.directives").directive("uiSortable",["ui.config",function(a){var b;return b={},a.sortable!=null&&angular.extend(b,a.sortable),{require:"?ngModel",link:function(a,c,d,e){var f,g,h,i,j;return h=angular.extend({},b,a.$eval(d.uiOptions)),e!=null&&(f=function(a,b){return b.item.data("ui-sortable-start",b.item.index())},g=function(b,c){var d,f;return f=c.item.data("ui-sortable-start"),d=c.item.index(),e.$modelValue.splice(d,0,e.$modelValue.splice(f,1)[0]),a.$apply()},i=h.start,h.start=function(b,c){return f(b,c),typeof i=="function"&&i(b,c),a.$apply()},j=h.update,h.update=function(b,c){return g(b,c),typeof j=="function"&&j(b,c),a.$apply()}),c.sortable(h)}}}]),angular.module("ui.directives").directive("uiJq",["ui.config",function(a){return{restrict:"A",compile:function(b,c){if(!angular.isFunction(b[c.uiJq]))throw new Error('ui-jq: The "'+c.uiJq+'" function does not exist');var d=a.jq&&a.jq[c.uiJq];return function(a,b,c){var e=[],f="change";c.uiOptions?(e=a.$eval("["+c.uiOptions+"]"),angular.isObject(d)&&angular.isObject(e[0])&&(e[0]=angular.extend(d,e[0]))):d&&(e=[d]),c.ngModel&&b.is("select,input,textarea")&&(e&&angular.isObject(e[0])&&e[0].ngChange!==undefined&&(f=e[0].ngChange),f&&b.on(f,function(){b.trigger("input")})),b[c.uiJq].apply(b,e)}}}}]),angular.module("ui.directives").directive("uiEvent",["$parse",function(a){return function(b,c,d){var f=b.$eval(d.uiEvent);angular.forEach(f,function(d,f){var g=a(d);c.bind(f,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),b.$apply(function(){g(b,{$event:a,$params:c})})})})}}]),angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){var f=d.$viewValue||"";b.val(f),b.mask(a.$eval(c.uiMask))},d.$parsers.push(function(a){var c=b.isMaskValid()||angular.isUndefined(b.isMaskValid())&&b.val().length>0;return d.$setValidity("mask",c),c?a:undefined}),b.bind("keyup",function(){a.$apply(function(){d.$setViewValue(b.mask())})})}}}]),angular.module("ui.directives").directive("uiModal",["$timeout",function(a){return{restrict:"EAC",require:"ngModel",link:function(b,c,d,f){c.addClass("modal hide"),c.on("shown",function(){c.find("[autofocus]").focus()}),b.$watch(d.ngModel,function(a){c.modal(a&&"show"||"hide")}),c.on(jQuery.support.transition&&"shown"||"show",function(){a(function(){f.$setViewValue(!0)})}),c.on(jQuery.support.transition&&"hidden"||"hide",function(){a(function(){f.$setViewValue(!1)})})}}}]),angular.module("ui.directives").directive("uiReset",["ui.config",function(a){var b=null;return a.reset!==undefined&&(b=a.reset),{require:"ngModel",link:function(a,c,d,e){var f;f=angular.element('<a class="ui-reset" />'),c.wrap('<span class="ui-resetwrap" />').after(f),f.bind("click",function(c){c.preventDefault(),a.$apply(function(){d.uiReset?e.$setViewValue(a.$eval(d.uiReset)):e.$setViewValue(b),e.$render()})})}}}]),function(){function a(a,b,c,d){angular.forEach(b.split(" "),function(b){var f={type:"map-"+b};google.maps.event.addListener(c,b,function(b){d.trigger(angular.extend({},f,b)),a.$$phase||a.$apply()})})}function b(b,d){c.directive(b,[function(){return{restrict:"A",link:function(c,e,f){c.$watch(f[b],function(b){a(c,d,b,e)})}}}])}var c=angular.module("ui.directives");c.directive("uiMap",["ui.config","$parse",function(b,c){var d="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",e=b.map||{};return{restrict:"A",link:function(b,f,g){var h=angular.extend({},e,b.$eval(g.uiOptions)),j=new google.maps.Map(f[0],h),k=c(g.uiMap);k.assign(b,j),a(b,d,j,f)}}}]),c.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(b,c,d){var e="closeclick content_change domready position_changed zindex_changed",f=b.mapInfoWindow||{};return{link:function(b,g,h){var j=angular.extend({},f,b.$eval(h.uiOptions));j.content=g[0];var k=c(h.uiMapInfoWindow),l=k(b);l||(l=new google.maps.InfoWindow(j),k.assign(b,l)),a(b,e,l,g),g.replaceWith("<div></div>");var m=l.open;l.open=function(a,c,e,f,h,i){d(g.contents())(b),m.call(l,a,c,e,f,h,i)}}}}]),b("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),b("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),b("uiMapGroundOverlay","click dblclick")}(),angular.module("ui.directives").factory("keypressHelper",["$parse",function(a){var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(d,e,f,g){var h,i=[];h=e.$eval(g["ui"+c(d)]),angular.forEach(h,function(b,c){var d,e;e=a(b),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(d,function(a){var c=a.metaKey||a.altKey,f=a.ctrlKey,g=a.shiftKey,h=a.keyCode;d==="keypress"&&!g&&h>=97&&h<=122&&(h-=32),angular.forEach(i,function(d){var h=d.keys[b[a.keyCode]]||d.keys[a.keyCode.toString()]||!1,i=d.keys.alt||!1,j=d.keys.ctrl||!1,k=d.keys.shift||!1;h&&i==c&&j==f&&k==g&&e.$apply(function(){d.expression(e,{$event:a})})})})}}]),angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(a){return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(a){return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(a){return{link:function(b,c,d){a("keyup",b,c,d)}}}]),angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f=c.uiValidate;f=a.$eval(f);if(!f)return;angular.isFunction(f)&&(f={validator:f}),angular.forEach(f,function(a,b){e=function(c){return a(c)?(d.$setValidity(b,!0),c):(d.$setValidity(b,!1),undefined)},d.$formatters.push(e),d.$parsers.push(e)})}}}),angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(a,b){var c={};return angular.isString(a.animate)?c["class"]=a.animate:a.animate&&(c=a.animate),{restrict:"A",link:function(a,d,e){var f={};e.uiAnimate&&(f=a.$eval(e.uiAnimate),angular.isString(f)&&(f={"class":f})),f=angular.extend({"class":"ui-animate"},c,f),d.addClass(f["class"]),b(function(){d.removeClass(f["class"])},20,!1)}}}]),angular.module("ui.directives").directive("uiSelect2",["ui.config","$http",function(a,b){var c={};return a.select2&&angular.extend(c,a.select2),{require:"?ngModel",compile:function(a,b){var d,e,f,g=a.is("select"),h=b.multiple!==undefined;return a.is("select")&&(e=a.find("option[ng-repeat], option[data-ng-repeat]"),e.length&&(f=e.attr("ng-repeat")||e.attr("data-ng-repeat"),d=jQuery.trim(f.split("|")[0]).split(" ").pop())),function(a,b,e,f){var i=angular.extend({},c,a.$eval(e.uiSelect2));g?(delete i.multiple,delete i.initSelection):h&&(i.multiple=!0);if(f){f.$render=function(){g?b.select2("val",f.$modelValue):h&&!f.$modelValue?b.select2("data",[]):b.select2("data",f.$modelValue)},d&&a.$watch(d,function(a,c,d){if(!a)return;setTimeout(function(){b.select2("val",f.$viewValue),b.trigger("change")})});if(!g){b.bind("change",function(){a.$apply(function(){f.$setViewValue(b.select2("data"))})});if(i.initSelection){var j=i.initSelection;i.initSelection=function(a,b){j(a,function(a){f.$setViewValue(a),b(a)})}}}}e.$observe("disabled",function(a){b.select2(a&&"disable"||"enable")}),a.$watch(e.ngMultiple,function(a){b.select2(i)}),b.val(a.$eval(e.ngModel)),setTimeout(function(){b.select2(i)})}}}}]),angular.module("ui.directives").directive("uiCodemirror",["ui.config","$parse",function(a,b){return"use strict",a.codemirror=a.codemirror||{},{require:"ngModel",link:function(c,d,f,g){if(!d.is("textarea"))throw new Error("ui-codemirror can only be applied to a textarea element");var h,i=b(f.uiCodemirror),j=function(a){var b=a.getValue();b!==g.$viewValue&&(g.$setViewValue(b),c.$apply())},k=function(b){b=angular.extend({},b,a.codemirror);var c=b.onChange;c?b.onChange=function(a){j(a),c(a)}:b.onChange=j,h&&h.toTextArea(),h=CodeMirror.fromTextArea(d[0],b)};k(i()),c.$watch(i,k,!0),g.$formatters.push(function(a){if(angular.isUndefined(a)||a===null)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),g.$render=function(){h.setValue(g.$viewValue)}}}}]),angular.module("ui.directives").directive("uiTinymce",["ui.config",function(a){return a.tinymce=a.tinymce||{},{require:"ngModel",link:function(b,c,d,f){var g,h={onchange_callback:function(a){a.isDirty()&&(a.save(),f.$setViewValue(c.val()),b.$$phase||b.$apply())},handle_event_callback:function(a){return this.isDirty()&&(this.save(),f.$setViewValue(c.val()),b.$$phase||b.$apply()),!0},setup:function(a){a.onSetContent.add(function(a,d){a.isDirty()&&(a.save(),f.$setViewValue(c.val()),b.$$phase||b.$apply())})}};d.uiTinymce?g=b.$eval(d.uiTinymce):g={},angular.extend(h,a.tinymce,g),setTimeout(function(){c.tinymce(h)})}}}]),angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){b[0].doNotMove=!0;var e=d.uiIf,f,g;a.$watch(e,function(d){f&&(f.remove(),f=null),g&&(g.$destroy(),g=null),d&&(g=a.$new(),c(g,function(a){f=a,b.after(a)})),b.parent().trigger("$childrenChanged")})}}}}]),angular.module("ui.directives").directive("uiScrollfix",["$window",function(a){return"use strict",{link:function(b,c,d){var f=c.offset().top;d.uiScrollfix?d.uiScrollfix.charAt(0)==="-"?d.uiScrollfix=f-d.uiScrollfix.substr(1):d.uiScrollfix.charAt(0)==="+"&&(d.uiScrollfix=f+parseFloat(d.uiScrollfix.substr(1))):d.uiScrollfix=f,angular.element(a).on("scroll.ui-scrollfix",function(){var b;if(angular.isDefined(a.pageYOffset))b=a.pageYOffset;else{var f=document.compatMode&&document.compatMode!=="BackCompat"?document.documentElement:document.body;b=f.scrollTop}!c.hasClass("ui-scrollfix")&&b>d.uiScrollfix?c.addClass("ui-scrollfix"):c.hasClass("ui-scrollfix")&&b<d.uiScrollfix&&c.removeClass("ui-scrollfix")})}}}]),angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(a,b){return a.uiCalendar=a.uiCalendar||{},{require:"ngModel",restrict:"A",scope:{events:"=ngModel"},link:function(c,d,f){function g(){var b,g={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},eventMouseover:function(a,b,c){c.name!=="agendaDay"&&$(b.target).attr("title",a.title)},events:c.events};f.uiCalendar?b=c.$eval(f.uiCalendar):b={},angular.extend(g,a.uiCalendar,b),d.html("").fullCalendar(g)}var h=b(f.ngModel);g(),c.$watch("events.length",function(a,b){g()},!0)}}}]),angular.module("ui.directives").directive("uiShow",[function(){return function(a,b,c){a.$watch(c.uiShow,function(a,c){a?b.addClass("ui-show"):b.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(a,b,c){a.$watch(c.uiHide,function(a,c){a?b.addClass("ui-hide"):b.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(a,b,c){a.$watch(c.uiToggle,function(a,c){a?b.removeClass("ui-hide").addClass("ui-show"):b.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(a,b){var c={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};return a.currency&&angular.extend(c,a.currency),{restrict:"EAC",require:"ngModel",link:function(a,d,e,f){var g,h,i;g=angular.extend({},c,a.$eval(e.uiCurrency)),h=function(a){var c;return c=a*1,c>0?d.addClass(g.pos):d.removeClass(g.pos),c<0?d.addClass(g.neg):d.removeClass(g.neg),c===0?d.addClass(g.zero):d.removeClass(g.zero),a===""?d.text(""):d.text(b(c,g.symbol)),!0},f.$render=function(){i=f.$viewValue,d.val(i),h(i)}}}}]),angular.module("ui.directives").directive("uiDate",["ui.config",function(a){"use strict";var b;return b={},angular.isObject(a.date)&&angular.extend(b,a.date),{require:"?ngModel",link:function(b,c,d,f){var g=function(){return angular.extend({},a.date,b.$eval(d.uiDate))},h=function(){var a=g();if(f){var d=function(){b.$apply(function(){var a=c.datepicker("getDate");c.datepicker("setDate",c.val()),f.$setViewValue(a)})};if(a.onSelect){var e=a.onSelect;a.onSelect=function(a,b){return d(),e(a,b)}}else a.onSelect=d;c.bind("change",d),f.$render=function(){var a=f.$viewValue;if(angular.isDefined(a)&&a!==null&&!angular.isDate(a))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");c.datepicker("setDate",a)}}c.datepicker("destroy"),c.datepicker(a),f.$render()};b.$watch(g,h,!0)}}}]).directive("uiDateFormat",[function(){var a={require:"ngModel",link:function(a,b,c,d){if(c.uiDateFormat==="")d.$formatters.push(function(a){if(angular.isString(a))return new Date(a)}),d.$parsers.push(function(a){if(a)return a.toISOString()});else{var e=c.uiDateFormat;d.$formatters.push(function(a){if(angular.isString(a))return $.datepicker.parseDate(e,a)}),d.$parsers.push(function(a){if(a)return $.datepicker.formatDate(e,a)})}}};return a}]),angular.module("ui.filters").filter("highlight",function(){return function(a,b,c){return b||angular.isNumber(b)?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}}),angular.module("ui.filters").filter("format",function(){return function(a,b){if(!a)return a;var c=a.toString(),d;return b===undefined?c:!angular.isArray(b)&&!angular.isObject(b)?c.split("$0").join(b):(d=angular.isArray(b)&&"$"||":",angular.forEach(b,function(a,b){c=c.split(d+b).join(a)}),c)}}),angular.module("ui.filters").filter("unique",function(){return function(a,b){if(b===!1)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var c={},d=[],e=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};angular.forEach(a,function(a){var b,c=!1;for(var f=0;f<d.length;f++)if(angular.equals(e(d[f]),e(a))){c=!0;break}c||d.push(a)}),a=d}return a}}),angular.module("ui.filters").filter("inflector",function(){function a(a){return a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function b(a,b){return a.replace(/[A-Z]/g,function(a){return b+a})}var c={humanize:function(c){return a(b(c," ").split("_").join(" "))},underscore:function(a){return a.substr(0,1).toLowerCase()+b(a.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(b){return b=b.substr(0,1).toLowerCase()+a(b.split("_").join(" ")).substr(1).split(" ").join(""),b}};return function(a,b,d){return b!==!1&&angular.isString(a)?(b=b||"humanize",c[b](a)):a}}),function(a,b,c){"use strict",b.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(a,d){function l(a){return m(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function m(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(b?null:/%20/g,"+")}function n(a,b){this.template=a+="#",this.defaults=b||{};var c=this.urlParams={};g(a.split(/\W/),function(b){b&&a.match(new RegExp("[^\\\\]:"+b+"\\W"))&&(c[b]=!0)}),this.template=a.replace(/\\:/g,":")}function o(b,d,l){function p(a){var b={};return g(d||{},function(c,d){b[d]=c.charAt&&c.charAt(0)=="@"?k(a,c.substr(1)):c}),b}function q(a){i(a||{},this)}var m=new n(b);return l=h({},e,l),g(l,function(e,k){var n=e.method=="POST"||e.method=="PUT"||e.method=="PATCH";q[k]=function(b,c,d,k){var l={},o,r=f,s=null;switch(arguments.length){case 4:s=k,r=d;case 3:case 2:if(!j(c)){l=b,o=c,r=d;break}if(j(b)){r=b,s=c;break}r=c,s=d;case 1:j(b)?r=b:n?o=b:l=b;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var t=this instanceof q?this:e.isArray?[]:new q(o);return a({method:e.method,url:m.url(h({},p(o),e.params||{},l)),data:o}).then(function(a){var b=a.data;b&&(e.isArray?(t.length=0,g(b,function(a){t.push(new q(a))})):i(b,t)),(r||f)(t,a.headers)},s),t},q.bind=function(a){return o(b,h({},d,a),l)},q.prototype["$"+k]=function(a,b,d){var e=p(this),g=f,h;switch(arguments.length){case 3:e=a,g=b,h=d;break;case 2:case 1:j(a)?(g=a,h=b):(e=a,g=b||f);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var i=n?this:c;q[k].call(this,e,i,g,h)}}),q}var e={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},f=b.noop,g=b.forEach,h=b.extend,i=b.copy,j=b.isFunction,k=function(a,b){return d(b)(a)};return n.prototype={url:function(a){var b=this,c=this.template,d;a=a||{},g(this.urlParams,function(e,f){d=l(a[f]||b.defaults[f]||""),c=c.replace(new RegExp(":"+f+"(\\W)"),d+"$1")}),c=c.replace(/\/?#$/,"");var e=[];return g(a,function(a,c){b.urlParams[c]||e.push(m(c)+"="+m(a))}),e.sort(),c=c.replace(/\/*$/,""),c+(e.length?"?"+e.join("&"):"")}},o}])}(window,window.angular),"use strict";var Ninja=function(a){var b=this;this.Options={accessToken:undefined,userAccessToken:undefined,server:"https://a.ninja.is",streamServer:"https://stream.ninja.is",version:0,debug:!1},this.ServerUrl=function(){var a=this.Options.server+"/rest/v"+this.Options.version;return a},this.StreamServerUrl=function(){var a=this.Options.streamServer+"/rest/v"+this.Options.version;return a};var c=function(){var a=b;this.getAuthSlug=function(b){var c=b?"&":"?",d=this.GetMode();switch(d){case Ninja.AuthenticationModes.ACCESS_TOKEN:return c+"access_token="+a.Options.accessToken;case Ninja.AuthenticationModes.USER_ACCESS_TOKEN:return c+"user_access_token="+a.Options.userAccessToken;case Ninja.AuthenticationModes.SESSION:return"";default:return""}},this.GetMode=function(){return a.Options[Ninja.AuthenticationModes.ACCESS_TOKEN]?Ninja.AuthenticationModes.ACCESS_TOKEN:a.Options[Ninja.AuthenticationModes.USER_ACCESS_TOKEN]?Ninja.AuthenticationModes.USER_ACCESS_TOKEN:Ninja.AuthenticationModes.SESSION}},d=function(a){var c=b;this.Options={},this.Options=Ninja.Utilities.ObjectMerge(this.Options,a),this.GetInfo=function(a){var b=c.ServerUrl()+"/user"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){a&&a(b)},this);return d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send(),!0};var d=function(a){c.Options.debug&&console.log(a)};this.GetStream=function(a){var b=c.ServerUrl()+"/user/stream"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){a&&a(b)},this);return d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send(),!0},this.GetPusherChannel=function(a){var b=c.ServerUrl()+"/user/pusherchannel"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){b.result&&a&&a(b)});return d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send(),!0},this.GetPreferences=function(a){var b=c.ServerUrl()+"/user/preferences"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){b.result&&a&&a(b.data)});return d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send(),!0},this.SetPreferences=function(a,b){var d=c.ServerUrl()+"/user/preferences"+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(a){a.result?b&&b(!0):b&&b(!1)});return e.open("PUT",d,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(a)),!0},this.GetBlocks=function(a){c.Options.debug&&console.log("GetBlocks");var b=c.ServerUrl()+"/blocks"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){if(b.result){var d=c.API.ParseBlocks(b.data);a&&a(d)}});d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send()},this.GetDevices=function(a){c.Options.debug&&console.log("GetDevices ");var b=c.ServerUrl()+"/devices"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){if(b.result){var d=c.API.ParseDevices(b.data);a&&a(d)}},this);d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send()},this.CreateService=function(a,b){var d=c.ServerUrl()+"/service/"+a+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(a){if(a.result){var d=a.data;c.API.GetDeviceByGuid(d.GUID,function(a){var d={};d[a.guid]=a;var e=c.API.ParseDevices(d);b&&b(e.devices[0],e.blocks[0])})}});e.open("PUT",d,!0),e.setRequestHeader("Accept","application/json"),e.send()}},e=function(){var a=b;this.GetDeviceByGuid=function(b,c){var d=a.ServerUrl()+"/device/"+b+a.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(a){a.result&&c&&c(a.data)});e.open("GET",d,!0),e.setRequestHeader("Accept","application/json"),e.send()},this.ParseBlocks=function(b){var c=[];for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=new a.Block({nodeId:d});c.push(f)}return c},this.ParseDevices=function(b){var c=[],d=[],e=function(b){var c;for(var e=0;e<d.length;e++){var f=d[e];f.Options.nodeId===b&&(c=f)}return c===undefined&&(c=new a.Block({nodeId:b}),d.push(c)),c};for(var f in b)if(b.hasOwnProperty(f)){var g=b[f],h=Ninja.Utilities.SplitGUID(f),i=e(h.nodeId),j=new a.Device({deviceId:h.deviceId,type:g.device_type,name:g.shortName,vendor:g.vid,port:g.gid,rawData:g});i.RegisterDevice(j);for(var k in g.subDevices){var l=new a.Subdevice(g.subDevices[k]);l.Id=k,j.Options.subdevices.push(l)}c.push(j)}return{blocks:d,devices:c}}};this.Block=function(a){var c=b,d,e,f=0;this.Devices=[],this.Options={nodeId:undefined,token:undefined,listenInterval:300},this.Options=Ninja.Utilities.ObjectMerge(this.Options,a),this.Claim=function(a){var b={nodeid:this.Options.nodeId},d=c.ServerUrl()+"/block"+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(b){b.result?a&&a(!0):a&&a(!1)},this);e.open("POST",d,!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(b))},this.Activate=function(a){function h(){}var b={nodeid:this.Options.nodeId},d=c.ServerUrl()+"/block/"+this.Options.nodeId+"/activate",e,f=Ninja.Utilities.CreateXHR(function(b){this.Options.token=b.token,a&&a(b.token)},this);f.open("GET",d,!0),xhr.setRequestHeader("Accept","application/json"),f.send();var g=function(){f=undefined,clearInterval(e),this.Activate()}},this.ConfirmActivation=function(a){var b={token:this.Options.token},d=c.ServerUrl()+"/block/"+this.Options.nodeId+"/activate",e=Ninja.Utilities.CreateXHR(function(b){b.result&&a&&a(b.token)});e.open("POST",d,!0),xhr.setRequestHeader("Accept","application/json"),e.send(JSON.stringify(b))},this.Unpair=function(a){var b=c.ServerUrl()+"/block/"+this.Options.nodeId+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){b.result&&a&&a(b.data)});d.open("DELETE",b,!0),d.setRequestHeader("Accept","application/json"),d.send()},this.HeartBeat=function(a){},this.IsListening=function(){return d!==undefined&&e!==undefined&&e.readyState===3},this.ParseCommands=function(){if(e&&e.readyState===4){var a=e.responseText.length;if(f===a&&f!==0)return;var b=e.responseText.substring(f,a);f=a;var c=b.split("\n");for(var d=0;d<c.length;d++){var g=c[d];if(g!==""){var h=JSON.parse(g);this.BroadcastCommand(h)}}this.Stop(),this.Listen()}},this.ListenErrorHandler=function(){this.Stop(),this.Listen()},this.Listen=function(a){if(this.Options.token===undefined)return!1;var b=c.ServerUrl()+"/block/"+this.Options.nodeId+"/commands";if(!e){try{e=Ninja.Utilities.CreateXHR(this.ParseCommands,this),e.open("GET",b,!0),e.setRequestHeader("X-Ninja-Token",this.Options.token),e.addEventListener("error",this.ListenErrorHandler.bind(this),!1),e.addEventListener("abort",this.ListenErrorHandler.bind(this),!1),e.addEventListener("load",this.ParseCommands.bind(this),!1),e.send()}catch(d){return!1}return!0}return!1},this.Stop=function(){return f=0,e=undefined,clearInterval(d),d=undefined,!0},this.BroadcastCommand=function(a){if(a.DEVICE){var b=a.DEVICE;for(var c=0;c<b.length;c++){var d=b[c],e=this.GetDeviceByPortVendorDeviceID(d.G,d.V,d.D);e.Actuate(d.DA)}}},this.RegisterDevice=function(a){a.Options.block=this,this.Devices.push(a)},this.GetDevices=function(){return this.Devices},this.GetDevicesByType=function(a){var b=[];for(var c=0;c<this.Devices.length;c++){var d=this.Devices[c];d.Options.type===a&&b.push(d)}return b},this.GetDevicesByDeviceId=function(a){var b=[];for(var c=0;c<this.Devices.length;c++){var d=this.Devices[c];d.Options.deviceId===a&&b.push(d)}return b},this.GetDeviceByPortVendorDeviceID=function(a,b,c){var d={};for(var e=0;e<this.Devices.length;e++){var f=this.Devices[e];f.Options.vendor===b&&f.Options.port==a.toString()&&f.Options.deviceId==c&&(d=f)}return d},this.GetDeviceByGuid=function(a){var b={};for(var c=0;c<this.Devices.length;c++){var d=this.Devices[c];d.GUID()===a&&(b=d)}return b}},this.Device=function(a){var c=b;this.GUID=function(){return this.Options.hasOwnProperty("guid")?this.Options.guid:this.Options.block?this.Options.block.Options.nodeId+"_"+this.Options.port+"_"+this.Options.vendor+"_"+this.Options.deviceId:"Not associated with a block. Please Register this device"};var d=function(){if(parseInt(this.Options.deviceId)===31||parseInt(this.Options.deviceId)===30){var a=this.Options.port.toString().substring(0,2),b=this.Options.port.toString().substring(2,4);this.Options.station=a,this.Options.channel=b}};this.AutoLoadData=function(){this.GetData(this.LoadData.bind(this))},this.LoadData=function(a){var b=new c.Block({nodeId:a.node});this.Options.block=b,this.Options.rawData=a,this.Options.deviceId=parseInt(a.did,10),this.Options.vendor=parseInt(a.vid),this.Options.port=a.gid,this.Options.type=a.device_type,this.Options.name=a.default_name,a.last_data&&a.last_data.hasOwnProperty("DA")&&(this.Options.value=a.last_data.DA)},this.Emit=function(a,b){var d=c.ServerUrl()+"/device/"+this.GUID()+c.Authentication.getAuthSlug();a={DA:a};var e=Ninja.Utilities.CreateXHR(function(a){b&&b(a)},this);return e.open("PUT",d,!0),e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(a)),!0},this.Options={name:"",type:Ninja.DeviceTypes.UNDEFINED,deviceId:0,vendor:0,port:0,block:undefined,value:undefined,subdevices:[],onActuate:function(){throw".onActuate() not implemented."}},this.on=function(a,b){},this.Delete=function(a){var b=c.ServerUrl()+"/device/"+this.GUID()+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){a&&a(b)},this);d.open("DELETE",b,!0),d.setRequestHeader("Accept","application/json"),d.send()},this.GetHistoricalData=function(a,b){var d=Ninja.Utilities.ObjectToQueryString(a),e=c.ServerUrl()+"/device/"+this.GUID()+"/data?"+d+c.Authentication.getAuthSlug(d.length>0),f=Ninja.Utilities.CreateXHR(function(a){a.result&&b&&b(a.data)});f.open("GET",e,!0),f.setRequestHeader("Accept","application/json"),f.send()},this.GetData=function(a){var b=c.ServerUrl()+"/device/"+this.GUID()+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){b.result&&a&&a(b.data)},this);d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send()},this.GetCallback=function(a){var b=c.ServerUrl()+"/device/"+this.GUID()+"/callback"+c.Authentication.getAuthSlug(),d=Ninja.Utilities.CreateXHR(function(b){b.result&&a&&a(b.data)});d.open("GET",b,!0),d.setRequestHeader("Accept","application/json"),d.send()},this.SetCallback=function(a,b){var d=c.ServerUrl()+"/device/"+this.GUID()+"/callback"+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(a){a.result&&b&&b()});if(a!==null){var f={url:a};e.open("POST",d,!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(f))}else e.open("DELETE",d,!0),e.setRequestHeader("Accept","application/json"),e.send()},this.Rename=function(a,b){var d={shortName:a},e=c.ServerUrl()+"/device/"+this.GUID()+c.Authentication.getAuthSlug(),f=Ninja.Utilities.CreateXHR(function(a){a.result&&b&&b()});f.open("PUT",e,!0),f.setRequestHeader("Accept","application/json"),f.setRequestHeader("Content-Type","application/json"),f.send(JSON.stringify(d))},this.SetSubdevice=function(a,b){if(!(a instanceof c.Subdevice))return!1;var d,e;a.Id?(d=c.ServerUrl()+"/device/"+this.GUID()+"/subdevice/"+a.Id+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(a){a.result?b&&b(!0):b&&b(!1)}),e.open("PUT",d,!0)):(d=c.ServerUrl()+"/device/"+this.GUID()+"/subdevice"+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(a){a.result?b&&b(a.data):b&&b(!1)}),e.open("POST",d,!0)),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Accept","application/json"),e.send(JSON.stringify(a.Options))},this.GetSubdeviceById=function(a,b){var c;for(var d in this.Options.subdevices){var e=this.Options.subdevices[d];if(d.Id==a){c=e;break}}return c},this.DeleteSubdevice=function(a,b){if(a instanceof c.Subdevice){if(!a.Id)return b&&b(!1),!1;var d=c.ServerUrl()+"/device/"+this.GUID()+"/subdevice/"+a.Id+c.Authentication.getAuthSlug(),e=Ninja.Utilities.CreateXHR(function(c){var d=this.Options.subdevices.indexOf(a);this.Options.subdevices.splice(d,1),b&&b(c.result?!0:!1)}.bind(this));e.open("DELETE",d,!0),e.setRequestHeader("Accept","application/json"),e.send()}},this.HasMetaData=function(){return Ninja.Utilities.ObjectIsDefined(this.GetMetaData())},this.GetMetaData=function(){return this.Options.rawData&&this.Options.rawData.meta?this.Options.rawData.meta:{}},this.Options=Ninja.Utilities.ObjectMerge(this.Options,a),this.Actuate=this.Options.onActuate,d.bind(this)(),this.Options.hasOwnProperty("guid")&&this.AutoLoadData()},this.Subdevice=function(a){var c=b;this.Id=null,this.Options={category:"",shortName:"",data:null,type:null};var d=function(a){switch(a.Options.category){case Ninja.SubdeviceCategories.RF:break;case Ninja.SubdeviceCategories.WEBHOOK:break;case Ninja.SubdeviceCategories.SMS:}},e=function(a){return a.Options.category===""?!1:a.Options.type===null||a.Options.type===""||a.Options.type===undefined?!1:!0};this.Options=Ninja.Utilities.ObjectMerge(this.Options,a);if(!e(this))return this;d(this)},this.App=function(a){var c=b,d=null;this.Options={name:"",redirectUri:null,secret:null},this.Save=function(a){var b,d={name:this.Options.name,redirect_uri:this.Options.redirectUri},f;this.Id?(f="PUT",d.id=this.Id,b=c.ServerUrl()+"/app/"+this.Id+c.Authentication.getAuthSlug()):(f="POST",b=c.ServerUrl()+"/app"+c.Authentication.getAuthSlug());var g=Ninja.Utilities.CreateXHR(function(b){b.result&&(e(b.data),a&&a(b.data))});g.open(f,b,!0),g.setRequestHeader("Content-Type","application/json"),g.setRequestHeader("Accept","application/json"),g.send(JSON.stringify(d))};var e=function(a){this.Id=a.id?a.id:null,this.Options.secret=a.secret?a.secret:null};this.Delete=function(){var a=c.ServerUrl()+"/app/"+this.Id+c.Authentication.getAuthSlug(),b=Ninja.Utilities.CreateXHR(function(a){});b.open("DELETE",a,!0),b.setRequestHeader("Accept","application/json"),b.send()},this.Options=Ninja.Utilities.ObjectMerge(this.Options,a)},this.Authentication=new c,this.API=new e,this.Options=Ninja.Utilities.ObjectMerge(this.Options,a),this.User=new d};Ninja.AuthenticationModes={USER_ACCESS_TOKEN:"userAccessToken",ACCESS_TOKEN:"accessToken",SESSION:"session"},Ninja.DeviceTypes={UNDEFINED:"undefined",BUTTON:"button",RGBLED:"rgbled",TEMPERATURE:"temperature",HUMIDITY:"humidity",RF433:"rf433",MOTION:"motion",DISTANCE:"distance",WEBSERVICE:"webservice",ORIENTATION:"orientation",LOCATION:"location",ACCELERATION:"acceleration",PROXIMITY:"proximity",SOUND:"sound",WEBCAM:"webcam",EMAIL:"email",TWILIO:"twilio",SMS:"sms",WEBHOOK:"webhook",FACEBOOK:"facebook",TWITTER:"twitter",NETWORK:"network",RELAY:"relay"},Ninja.DeviceModes={ACTUATOR:"actuator",SENSOR:"sensor"},Ninja.DeviceDataFunctions={MEAN:"mean",SUM:"sum",MINIMUM:"min",MAXIMUM:"max",STDDEV:"stddev",SUMSQ:"ss",COUNT:"count"},Ninja.DeviceDataIntervals={MINUTE:"min",HOUR:"hour",DAY:"day",MONTH:"month",YEAR:"year"},Ninja.SubdeviceCategories={EMAIL:"email",RF:"rf",WEBHOOK:"webhook",SMS:"sms"},Ninja.SubdeviceTypes={ACTUATOR:"actuator",SENSOR:"sensor"},Ninja.Utilities={ObjectMerge:function(a,b){for(var c in b)try{b[c].constructor==Object?a[c]=this.ObjectMerge(a[c],b[c]):a[c]=b[c]}catch(d){a[c]=b[c]}return a},ObjectToQueryString:function(a){var b="",c=[];for(var d in a)try{d&&a[d]&&(b=d+"="+a[d],c.push(b))}catch(e){}return c.join("&")},ObjectArrayToArray:function(a,b){var c=[];b||(b="id");for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];e[b]=d,c.push(e)}return c},ObjectIsDefined:function(a){var b=!1;for(var c in a)try{c&&a[c]&&(b=!0)}catch(d){b=!1}return b},CreateXHR:function(a,b){var c;if(window.ActiveXObject)try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){c=null}else c=new XMLHttpRequest;return c.onreadystatechange=function(d){c.readyState===4&&c.responseText&&(a&&b?a.call(b,JSON.parse(c.responseText)):a&&a(JSON.parse(c.responseText)))},c},SplitGUID:function(a){var b=a.split("_"),c=b[0],d=b[1],e=b[2],f=b[3];return{nodeId:c,port:d,vendor:e,deviceId:f}}},Ninja.Result=function(a){var b=!1,c="",d,e;return arguments.length===3?(b=arguments[0],c=arguments[1],d=arguments[2]):arguments.length===2?(b=arguments[0],b?d=arguments[1]:c=arguments[1]):arguments.length===1&&(a.result&&(b=a.result),a.message&&(c=a.message),a.payload&&(d=a.payload)),e={result:b,message:c,payload:d},e},jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?jQuery.easing.easeInBounce(a,b*2,0,d,e)*.5+c:jQuery.easing.easeOutBounce(a,b*2-e,0,d,e)*.5+d*.5+c}}),function(a,b){var c="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(d){function e(){var b=a(n),c=a(o);i&&(o.length?i.reject(k,b,c):i.resolve(k)),a.isFunction(d)&&d.call(h,k,b,c)}function f(a){g(a.target,"error"===a.type)}function g(b,d){b.src===c||-1!==a.inArray(b,l)||(l.push(b),d?o.push(b):n.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),j&&i.notifyWith(a(b),[d,k,a(n),a(o)]),k.length===l.length&&(setTimeout(e),k.unbind(".imagesLoaded",f)))}var h=this,i=a.isFunction(a.Deferred)?a.Deferred():0,j=a.isFunction(i.notify),k=h.find("img").add(h.filter("img")),l=[],n=[],o=[];return a.isPlainObject(d)&&a.each(d,function(a,b){"callback"===a?d=b:i&&i[a](b)}),k.length?k.bind("load.imagesLoaded error.imagesLoaded",f).each(function(d,e){var f=e.src,h=a.data(e,"imagesLoaded");if(h&&h.src===f)g(e,h.isBroken);else if(e.complete&&e.naturalWidth!==b)g(e,0===e.naturalWidth||0===e.naturalHeight);else if(e.readyState||e.complete)e.src=c,e.src=f}):e(),i?i.promise(h):h}}(jQuery),function(){Function.prototype.scopedTo===void 0&&(Function.prototype.scopedTo=function(a,b){var c=this;return function(){return c.apply(a,Array.prototype.slice.call(b||[]).concat(Array.prototype.slice.call(arguments)))}});var a=function(b,d){this.options=d||{},this.key=b,this.channels=new a.Channels,this.global_emitter=new a.EventsDispatcher;var e=this;this.checkAppKey(),this.connection=new a.Connection(this.key,this.options),this.connection.bind("connected",function(){e.subscribeAll()}).bind("message",function(a){var b=a.event.indexOf("pusher_internal:")===0;if(a.channel){var c;(c=e.channel(a.channel))&&c.emit(a.event,a.data)}b||e.global_emitter.emit(a.event,a.data)}).bind("disconnected",function(){e.channels.disconnect()}).bind("error",function(b){a.warn("Error",b)}),a.instances.push(this),a.isReady&&e.connect()};a.instances=[],a.prototype={channel:function(a){return this.channels.find(a)},connect:function(){this.connection.connect()},disconnect:function(){this.connection.disconnect()},bind:function(a,b){return this.global_emitter.bind(a,b),this},bind_all:function(a){return this.global_emitter.bind_all(a),this},subscribeAll:function(){for(channelName in this.channels.channels)this.channels.channels.hasOwnProperty(channelName)&&this.subscribe(channelName)},subscribe:function(a){var b=this,c=this.channels.add(a,this);return this.connection.state==="connected"&&c.authorize(this.connection.socket_id,this.options,function(d,f){d?c.emit("pusher:subscription_error",f):b.send_event("pusher:subscribe",{channel:a,auth:f.auth,channel_data:f.channel_data})}),c},unsubscribe:function(a){this.channels.remove(a),this.connection.state==="connected"&&this.send_event("pusher:unsubscribe",{channel:a})},send_event:function(a,b,c){return this.connection.send_event(a,b,c)},checkAppKey:function(){(this.key===null||this.key===void 0)&&a.warn("Warning","You must pass your app key when you instantiate Pusher.")}},a.Util={extend:function b(a,c){for(var d in c)a[d]=c[d]&&c[d].constructor&&c[d].constructor===Object?b(a[d]||{},c[d]):c[d];return a},stringify:function(){for(var a=["Pusher"],b=0;b<arguments.length;b++)typeof arguments[b]=="string"?a.push(arguments[b]):window.JSON==void 0?a.push(arguments[b].toString()):a.push(JSON.stringify(arguments[b]));return a.join(" : ")},arrayIndexOf:function(a,b){var c=Array.prototype.indexOf;if(a==null)return-1;if(c&&a.indexOf===c)return a.indexOf(b);for(i=0,l=a.length;i<l;i++)if(a[i]===b)return i;return-1}},a.debug=function(){a.log&&a.log(a.Util.stringify.apply(this,arguments))},a.warn=function(){window.console&&window.console.warn?window.console.warn(a.Util.stringify.apply(this,arguments)):a.log&&a.log(a.Util.stringify.apply(this,arguments))},a.VERSION="1.12.5",a.host="ws.pusherapp.com",a.ws_port=80,a.wss_port=443,a.sockjs_host="sockjs.pusher.com",a.sockjs_http_port=80,a.sockjs_https_port=443,a.sockjs_path="/pusher",a.channel_auth_endpoint="/pusher/auth",a.cdn_http="http://js.pusher.com/",a.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/",a.dependency_suffix=".min",a.channel_auth_transport="ajax",a.activity_timeout=12e4,a.pong_timeout=3e4,a.isReady=!1,a.ready=function(){a.isReady=!0;for(var b=0,d=a.instances.length;b<d;b++)a.instances[b].connect()},this.Pusher=a}.call(this),function(){function a(){this._callbacks={}}function b(b){this.callbacks=new a,this.global_callbacks=[],this.failThrough=b}a.prototype.get=function(a){return this._callbacks[this._prefix(a)]},a.prototype.add=function(a,b){var c=this._prefix(a);this._callbacks[c]=this._callbacks[c]||[],this._callbacks[c].push(b)},a.prototype.remove=function(a,b){if(this.get(a)){var c=Pusher.Util.arrayIndexOf(this.get(a),b);this._callbacks[this._prefix(a)].splice(c,1)}},a.prototype._prefix=function(a){return"_"+a},b.prototype.bind=function(a,b){return this.callbacks.add(a,b),this},b.prototype.unbind=function(a,b){return this.callbacks.remove(a,b),this},b.prototype.emit=function(a,b){for(var c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var d=this.callbacks.get(a);if(d)for(c=0;c<d.length;c++)d[c](b);else this.failThrough&&this.failThrough(a,b);return this},b.prototype.bind_all=function(a){return this.global_callbacks.push(a),this},this.Pusher.EventsDispatcher=b}.call(this),function(){function a(a,b,c){b[a]!==void 0&&b[a](c)}function b(a,b,d){c.EventsDispatcher.call(this),this.state=void 0,this.errors=[],this.stateActions=d,this.transitions=b,this.transition(a)}var c=this.Pusher;b.prototype.transition=function(b,d){var e=this.state,f=this.stateActions;if(e&&c.Util.arrayIndexOf(this.transitions[e],b)==-1)throw this.emit("invalid_transition_attempt",{oldState:e,newState:b}),Error("Invalid transition ["+e+" to "+b+"]");a(e+"Exit",f,d),a(e+"To"+(b.substr(0,1).toUpperCase()+b.substr(1)),f,d),a(b+"Pre",f,d),this.state=b,this.emit("state_change",{oldState:e,newState:b}),a(b+"Post",f,d)},b.prototype.is=function(a){return this.state===a},b.prototype.isNot=function(a){return this.state!==a},c.Util.extend(b.prototype,c.EventsDispatcher.prototype),this.Pusher.Machine=b}.call(this),function(){var a=function(){var a=this;Pusher.EventsDispatcher.call(this),window.addEventListener!==void 0&&(window.addEventListener("online",function(){a.emit("online",null)},!1),window.addEventListener("offline",function(){a.emit("offline",null)},!1))};a.prototype.isOnLine=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},Pusher.Util.extend(a.prototype,Pusher.EventsDispatcher.prototype),this.Pusher.NetInfo=a}.call(this),function(){function a(a){a.connectionWait=0,a.openTimeout=c.TransportType==="native"?4e3:c.TransportType==="flash"?7e3:6e3,a.connectedTimeout=2e3,a.connectionSecure=a.compulsorySecure,a.failedAttempts=0}function b(b,i){function k(){x.openTimeout<g&&(x.openTimeout+=e),x.connectedTimeout<h&&(x.connectedTimeout+=f),x.compulsorySecure!==!0&&(x.connectionSecure=!x.connectionSecure),x.failedAttempts++}function l(a){return a=a||document.location.protocol==="https:",(a?"wss://":"ws://")+c.host+":"+(a?c.wss_port:c.ws_port)}function m(a){return a=a||document.location.protocol==="https:",(a?"https://":"http://")+c.sockjs_host+":"+(a?c.sockjs_https_port:c.sockjs_http_port)+c.sockjs_path}function n(){x._machine.transition("impermanentlyClosing")}function o(){x._activityTimer&&clearTimeout(x._activityTimer),x.ping&&(x._activityTimer=setTimeout(function(){x.send_event("pusher:ping",{}),x._activityTimer=setTimeout(function(){x.socket.close()},x.options.pong_timeout||c.pong_timeout)},x.options.activity_timeout||c.activity_timeout))}function p(){var a=x.connectionWait;if(a===0&&x.connectedAt){var b=(new Date).getTime()-x.connectedAt;b<1e3&&(a=1e3-b)}return a}function q(a){a=s(a);if(a!==void 0)if(a.event==="pusher:connection_established")x._machine.transition("connected",a.data.socket_id);else if(a.event==="pusher:error"){var b=a.data.code;x.emit("error",{type:"PusherError",data:{code:b,message:a.data.message}}),b===4e3?(x.compulsorySecure=!0,x.connectionSecure=!0,x.options.encrypted=!0,n()):b<4100?x._machine.transition("permanentlyClosing"):b<4200?(x.connectionWait=1e3,x._machine.transition("waiting")):b<4300?n():x._machine.transition("permanentlyClosing")}}function r(a){o(),a=s(a);if(a!==void 0){c.debug("Event recd",a);switch(a.event){case"pusher:error":x.emit("error",{type:"PusherError",data:a.data});break;case"pusher:ping":x.send_event("pusher:pong",{})}x.emit("message",a)}}function s(a){try{var b=JSON.parse(a.data);if(typeof b.data=="string")try{b.data=JSON.parse(b.data)}catch(c){if(!(c instanceof SyntaxError))throw c}return b}catch(d){x.emit("error",{type:"MessageParseError",error:d,data:a.data})}}function u(){x._machine.transition("waiting")}function v(a){x.emit("error",{type:"WebSocketError",error:a})}function w(a,b){var d=x.state;x.state=a,d!==a&&(c.debug("State changed",d+" -> "+a),x.emit("state_change",{previous:d,current:a}),x.emit(a,b))}var x=this;c.EventsDispatcher.call(this),this.ping=!0,this.options=c.Util.extend({encrypted:!1},i),this.netInfo=new c.NetInfo,this.netInfo.bind("online",function(){x._machine.is("waiting")&&(x._machine.transition("connecting"),w("connecting"))}),this.netInfo.bind("offline",function(){x._machine.is("connected")&&(x.socket.onclose=void 0,x.socket.onmessage=void 0,x.socket.onerror=void 0,x.socket.onopen=void 0,x.socket.close(),x.socket=void 0,x._machine.transition("waiting"))}),this._machine=new c.Machine("initialized",d,{initializedPre:function(){x.compulsorySecure=x.options.encrypted,x.key=b,x.socket=null,x.socket_id=null,x.state="initialized"},waitingPre:function(){x.netInfo.isOnLine()?(x.failedAttempts<2?w("connecting"):(w("unavailable"),x.connectionWait=1e4),x.connectionWait>0&&x.emit("connecting_in",p()),x._waitingTimer=setTimeout(function(){x._machine.transition("connecting")},p())):w("unavailable")},waitingExit:function(){clearTimeout(x._waitingTimer)},connectingPre:function(){if(x.netInfo.isOnLine()===!1)x._machine.transition("waiting"),w("unavailable");else{var a="/app/"+x.key+"?protocol=5&client=js&version="+c.VERSION+"&flash="+(c.TransportType==="flash"?"true":"false");if(c.TransportType==="sockjs"){c.debug("Connecting to sockjs",c.sockjs);var b=m(x.connectionSecure);x.ping=!1,x.socket=new SockJS(b),x.socket.onopen=function(){x.socket.send(JSON.stringify({path:a})),x._machine.transition("open")}}else b=l(x.connectionSecure)+a,c.debug("Connecting",b),x.socket=new c.Transport(b),x.socket.onopen=function(){x._machine.transition("open")};x.socket.onclose=u,x.socket.onerror=v,x._connectingTimer=setTimeout(n,x.openTimeout)}},connectingExit:function(){clearTimeout(x._connectingTimer),x.socket.onopen=void 0},connectingToWaiting:function(){k()},connectingToImpermanentlyClosing:function(){k()},openPre:function(){x.socket.onmessage=q,x.socket.onerror=v,x.socket.onclose=u,x._openTimer=setTimeout(n,x.connectedTimeout)},openExit:function(){clearTimeout(x._openTimer),x.socket.onmessage=void 0},openToWaiting:function(){k()},openToImpermanentlyClosing:function(){k()},connectedPre:function(b){x.socket_id=b,x.socket.onmessage=r,x.socket.onerror=v,x.socket.onclose=u,a(x),x.connectedAt=(new Date).getTime(),o()},connectedPost:function(){w("connected")},connectedExit:function(){x._activityTimer&&clearTimeout(x._activityTimer),w("disconnected")},impermanentlyClosingPost:function(){x.socket&&(x.socket.onclose=u,x.socket.close())},permanentlyClosingPost:function(){x.socket?(x.socket.onclose=function(){a(x),x._machine.transition("permanentlyClosed")},x.socket.close()):(a(x),x._machine.transition("permanentlyClosed"))},failedPre:function(){w("failed"),c.debug("WebSockets are not available in this browser.")},permanentlyClosedPost:function(){w("disconnected")}})}var c=this.Pusher,d={initialized:["waiting","failed"],waiting:["connecting","permanentlyClosed"],connecting:["open","permanentlyClosing","impermanentlyClosing","waiting"],open:["connected","permanentlyClosing","impermanentlyClosing","waiting"],connected:["permanentlyClosing","waiting"],impermanentlyClosing:["waiting","permanentlyClosing"],permanentlyClosing:["permanentlyClosed"],permanentlyClosed:["waiting","failed"],failed:["permanentlyClosed"]},e=2e3,f=2e3,g=1e4,h=1e4;b.prototype.connect=function(){!this._machine.is("failed")&&!c.Transport?this._machine.transition("failed"):this._machine.is("initialized")?(a(this),this._machine.transition("waiting")):this._machine.is("waiting")&&this.netInfo.isOnLine()===!0?this._machine.transition("connecting"):this._machine.is("permanentlyClosed")&&(a(this),this._machine.transition("waiting"))},b.prototype.send=function(a){if(this._machine.is("connected")){var b=this;return setTimeout(function(){b.socket.send(a)},0),!0}return!1},b.prototype.send_event=function(a,b,d){return a={event:a,data:b},d&&(a.channel=d),c.debug("Event sent",a),this.send(JSON.stringify(a))},b.prototype.disconnect=function(){this._machine.is("permanentlyClosed")||(this._machine.is("waiting")||this._machine.is("failed")?this._machine.transition("permanentlyClosed"):this._machine.transition("permanentlyClosing"))},c.Util.extend(b.prototype,c.EventsDispatcher.prototype),this.Pusher.Connection=b}.call(this),function(){Pusher.Channels=function(){this.channels={}},Pusher.Channels.prototype={add:function(a,b){var c=this.find(a);return c||(c=Pusher.Channel.factory(a,b),this.channels[a]=c),c},find:function(a){return this.channels[a]},remove:function(a){delete this.channels[a]},disconnect:function(){for(var a in this.channels)this.channels[a].disconnect()}},Pusher.Channel=function(a,b){var c=this;Pusher.EventsDispatcher.call(this,function(b){Pusher.debug("No callbacks on "+a+" for "+b)}),this.pusher=b,this.name=a,this.subscribed=!1,this.bind("pusher_internal:subscription_succeeded",function(a){c.onSubscriptionSucceeded(a)})},Pusher.Channel.prototype={init:function(){},disconnect:function(){this.subscribed=!1,this.emit("pusher_internal:disconnected")},onSubscriptionSucceeded:function(){this.subscribed=!0,this.emit("pusher:subscription_succeeded")},authorize:function(a,b,c){return c(!1,{})},trigger:function(a,b){return this.pusher.send_event(a,b,this.name)}},Pusher.Util.extend(Pusher.Channel.prototype,Pusher.EventsDispatcher.prototype),Pusher.Channel.PrivateChannel={authorize:function(a,b,c){var d=this;return(new Pusher.Channel.Authorizer(this,Pusher.channel_auth_transport,b)).authorize(a,function(a,b){a||d.emit("pusher_internal:authorized",b),c(a,b)})}},Pusher.Channel.PresenceChannel={init:function(){this.members=new a(this)},onSubscriptionSucceeded:function(){this.subscribed=!0}};var a=function(a){var b=this,c=function(){this._members_map={},this.count=0,this.me=null};c.call(this),a.bind("pusher_internal:authorized",function(c){var d=JSON.parse(c.channel_data);a.bind("pusher_internal:subscription_succeeded",function(c){b._members_map=c.presence.hash,b.count=c.presence.count,b.me=b.get(d.user_id),a.emit("pusher:subscription_succeeded",b)})}),a.bind("pusher_internal:member_added",function(c){b.get(c.user_id)===null&&b.count++,b._members_map[c.user_id]=c.user_info,a.emit("pusher:member_added",b.get(c.user_id))}),a.bind("pusher_internal:member_removed",function(c){var d=b.get(c.user_id);d&&(delete b._members_map[c.user_id],b.count--,a.emit("pusher:member_removed",d))}),a.bind("pusher_internal:disconnected",function(){c.call(b)})};a.prototype={each:function(a){for(var b in this._members_map)a(this.get(b))},get:function(a){return this._members_map.hasOwnProperty(a)?{id:a,info:this._members_map[a]}:null}},Pusher.Channel.factory=function(a,b){var c=new Pusher.Channel(a,b);return a.indexOf("private-")===0?Pusher.Util.extend(c,Pusher.Channel.PrivateChannel):a.indexOf("presence-")===0&&(Pusher.Util.extend(c,Pusher.Channel.PrivateChannel),Pusher.Util.extend(c,Pusher.Channel.PresenceChannel)),c.init(),c}}.call(this),function(){Pusher.Channel.Authorizer=function(a,b,c){this.channel=a,this.type=b,this.authOptions=(c||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(a){var a="&socket_id="+encodeURIComponent(a)+"&channel_name="+encodeURIComponent(this.channel.name),b;for(b in this.authOptions.params)a+="&"+encodeURIComponent(b)+"="+encodeURIComponent(this.authOptions.params[b]);return a},authorize:function(a,b){return Pusher.authorizers[this.type].call(this,a,b)}},Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(a,b){var c;c=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.open("POST",Pusher.channel_auth_endpoint,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var d in this.authOptions.headers)c.setRequestHeader(d,this.authOptions.headers[d]);return c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200){var a,d=!1;try{a=JSON.parse(c.responseText),d=!0}catch(e){b(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+c.responseText)}d&&b(!1,a)}else Pusher.warn("Couldn't get auth info from your webapp",c.status),b(!0,c.status)},c.send(this.composeQuery(a)),c},jsonp:function(a,b){this.authOptions.headers!==void 0&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var c=document.createElement("script");Pusher.auth_callbacks[this.channel.name]=function(a){b(!1,a)},c.src=Pusher.channel_auth_endpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+this.channel.name+"']")+this.composeQuery(a);var d=document.getElementsByTagName("head")[0]||document.documentElement;d.insertBefore(c,d.firstChild)}}}.call(this);var _require=function(){function a(a,b){document.addEventListener?a.addEventListener("load",b,!1):a.attachEvent("onreadystatechange",function(){(a.readyState=="loaded"||a.readyState=="complete")&&b()})}function b(b,d){var e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.setAttribute("src",b),f.setAttribute("type","text/javascript"),f.setAttribute("async",!0),a(f,function(){d()}),e.appendChild(f)}return function(a,c){for(var d=0,e=0;e<a.length;e++)b(a[e],function(){a.length==++d&&setTimeout(c,0)})}}();(function(){!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket),window.WebSocket&&(Pusher.Transport=window.WebSocket,Pusher.TransportType="native");var a=(document.location.protocol=="http:"?Pusher.cdn_http:Pusher.cdn_https)+Pusher.VERSION,b=[];window.JSON||b.push(a+"/json2"+Pusher.dependency_suffix+".js"),window.WebSocket||(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0,window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0,b.push(a+"/flashfallback"+Pusher.dependency_suffix+".js"));var c=function(){return window.WebSocket?function(){Pusher.ready()}:function(){window.WebSocket?(Pusher.Transport=window.WebSocket,Pusher.TransportType="flash",window.WEB_SOCKET_SWF_LOCATION=a+"/WebSocketMain.swf",WebSocket.__addTask(function(){Pusher.ready()}),WebSocket.__initialize()):(sockjsPath=a+"/sockjs"+Pusher.dependency_suffix+".js",_require([sockjsPath],function(){Pusher.Transport=SockJS,Pusher.TransportType="sockjs",Pusher.ready()}))}}(),d=function(a){var b=function(){document.body?a():setTimeout(b,0)};b()},e=function(){d(c)};b.length>0?_require(b,e):e()})(),$.fn.spectrum=function(a,b){return this.each(function(){var c=$(this);(function d(){var e=a.shift(),f=b.shift();e&&f?c.animate({backgroundColor:e},f,d):(c.stop(!0,!0),c.css({backgroundColor:"transparent"}))})()})},function(a){a.fn.iToggle=function(b){function e(b,c){b==1?d.type=="radio"?a("label[for="+c+"]").addClass("ilabel_radio"):a("label[for="+c+"]").addClass("ilabel"):a("label[for="+c+"]").remove()}function f(b,c){d.onClick.call(b),h=b.innerHeight(),t=b.attr("for"),b.hasClass("iTon")?(d.onClickOff.call(b),b.animate({backgroundPositionX:"100%"},d.speed,d.easing,function(){b.removeClass("iTon").addClass("iToff"),clickEnabled=!0,d.onSlide.call(this),d.onSlideOff.call(this)}),a("input#"+t).removeAttr("checked")):(d.onClickOn.call(b),b.animate({backgroundPositionX:"0%"},d.speed,d.easing,function(){b.removeClass("iToff").addClass("iTon"),clickEnabled=!0,d.onSlide.call(this),d.onSlideOn.call(this)}),a("input#"+t).attr("checked","checked")),c==1&&(name=a("#"+t).attr("name"),f(b.siblings("label[for]")))}clickEnabled=!0;var c={type:"checkbox",keepLabel:!0,easing:!1,speed:200,onClick:function(){},onClickOn:function(){},onClickOff:function(){},onSlide:function(){},onSlideOn:function(){},onSlideOff:function(){}},d=a.extend({},c,b);this.each(function(){var b=a(this);if(b.prop("tagName")=="INPUT"){var c=b.attr("id");e(d.keepLabel,c),b.addClass("iT_checkbox").before('<label class="itoggle" for="'+c+'"><span></span></label>'),b.attr("checked")?b.prev("label").addClass("iTon"):b.prev("label").addClass("iToff")}else b.children("input:"+d.type).each(function(){var b=a(this).attr("id");e(d.keepLabel,b),a(this).addClass("iT_checkbox").before('<label class="itoggle" for="'+b+'"><span></span></label>'),a(this).attr("checked")?a(this).prev("label").addClass("iTon"):a(this).prev("label").addClass("iToff"),d.type=="radio"&&a(this).prev("label").addClass("iT_radio")})}),a("label.itoggle").click(function(){return clickEnabled==1&&(clickEnabled=!1,a(this).hasClass("iT_radio")?a(this).hasClass("iTon")?clickEnabled=!0:f(a(this),!0):f(a(this))),!1}),a("label.ilabel").click(function(){return clickEnabled==1&&(clickEnabled=!1,f(a(this).next("label.itoggle"))),!1})}}(jQuery),"use strict";var DEBUG=!1,yeomanApp=angular.module("yeomanApp",["ngResource","ui"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/editZone",{templateUrl:"views/editZone.html",controller:"EditZoneCtrl"}).when("/configureTrigger",{templateUrl:"views/configureTrigger.html",controller:"ConfigureTriggerCtrl"}).when("/alerts",{templateUrl:"views/alerts.html",controller:"AlertsCtrl"}).when("/configureAlert",{templateUrl:"views/configureAlert.html",controller:"ConfigureAlertCtrl"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl"}).when("/editZoneWebcams",{templateUrl:"views/editZoneWebcams.html",controller:"EditZoneWebcamsCtrl"}).otherwise({redirectTo:"/"})}]).config(["$locationProvider",function(a){a.html5Mode(!1)}]);yeomanApp.run(["$rootScope","$http","$location","UIEvents","NinjaService","UserService","PusherService","DeviceService","ZoneService","AlertService",function(a,b,c,d,e,f,g,h,i,j){window.screen.height==568&&(document.querySelector("meta[name=viewport]").content="width=320.1"),a.Override=null,a.Alerts=j.Alerts,a.Zones=i.Zones,a.setRoute=function(a){c.path(a)},a.GetOverride=function(){b.get("/override").success(function(b){DEBUG&&console.log("GET /override",b),a.$broadcast(d.OverrideUpdate,b.override),a.Override=b.override}).error(function(a){DEBUG&&console.log("GET /override",a)})},a.GetOverride(),f.GetLoginStatus(),f.GetInfo(),i.GetZones(),j.GetAlerts(),h.LoadUserDevices(function(){})}]),"use strict",yeomanApp.controller("MainCtrl",["$scope","$rootScope","UIEvents","ZoneFactory","ZoneService","EditZoneService","AlertService","AlertFactory","EditAlertService",function(a,b,c,d,e,f,g,h,i){a.ConfigureMode=!1,a.Override=null,a.Zones=e.Zones,a.Alerts=g.Alerts,a.AddZone=function(){var e=new d({name:"My Zone"});f.Zone=e,b.$broadcast(c.ZoneAdding,e),a.setRoute("/editZone")},a.SetConfigureMode=function(d){a.ConfigureMode=d,b.$broadcast(c.SetConfigureMode,a.ConfigureMode),b.$broadcast(c.TopBarClose),d||b.setRoute("/")},a.CreateAlert=function(){var b=new h({type:"sms"});i.Alert=b,a.setRoute("/configureAlert")},a.$on(c.SetConfigureMode,function(b,c){a.ConfigureMode=c}),a.$on(c.OverrideUpdate,function(b,c){a.Override=c}),b.$broadcast(c.SetConfigureMode,a.ConfigureMode)}]),"use strict",yeomanApp.controller("HeaderCtrl",["$scope","$rootScope","$location","$http","UIEvents","ZoneFactory","EditZoneService",function(a,b,c,d,e,f,g){a.ConfigureMode=!1,a.LocationIsHome=function(){return c.$$path==="/"},a.SetConfigureMode=function(c){a.ConfigureMode=c,b.$broadcast(e.SetConfigureMode,a.ConfigureMode),b.$broadcast(e.TopBarClose),c||b.setRoute("/")},b.$on(e.SetConfigureMode,function(b,c){a.ConfigureMode=c}),a.ConfigureAlerts=function(){b.$broadcast(e.TopBarClose),a.setRoute("/alerts")},a.GoHome=function(){b.$broadcast(e.TopBarClose),b.setRoute("/")},a.GoHistory=function(){b.$broadcast(e.TopBarClose),b.setRoute("/history")},a.Logout=function(){window.location.href="/signout"},a.AddZone=function(){g.Reset(),b.$broadcast(e.TopBarClose),b.setRoute("/editZone")}}]),"use strict",yeomanApp.controller("ZoneCtrl",["$scope","$rootScope","UIEvents","EditZoneService","TriggerFactory","EditTriggerService",function(a,b,c,d,e,f){a.EditZone=function(){b.$broadcast(c.ZoneEditing,a.zone),d.Zone=a.zone,a.setRoute("/editZone")},a.SetOverride=function(b){a.zone.SetOverride(b)},a.Delete=function(){a.zone.Delete()},a.IsArmed=function(){return b.Override===null?a.zone.Options.overrideActive:b.Override},a.IsOverridden=function(){return b.Override!==null},a.HasTriggers=function(){return a.zone.Triggers.length>0},a.AddNewTrigger=function(){d.Zone=a.zone;var b=new e({zone:a.zone,name:"My Trigger",type:"PIR"});f.Trigger=b,a.setRoute("/configureTrigger")}}]),"use strict",yeomanApp.controller("EditZoneCtrl",["$scope","$rootScope","UIEvents","ZoneFactory","ZoneService","EditZoneService","EditTriggerService","TriggerFactory","DeviceService",function(a,b,c,d,e,f,g,h,i){a.Zone=f.Zone,a.Submitted=!1,a.Save=function(){a.Submitted=!0,a.editZone.$valid&&(a.Zone.id?(a.Zone.Save(),a.setRoute("/")):a.Zone.Save(function(){f.Zone=a.Zone,a.AddNewTrigger()}))},a.GetWebcamBanner=function(){if(a.Zone.HasAnyWebcam()){var b=i.GetDeviceByGuid(a.Zone.Options.webcams[0]);return"https://stream.ninja.is/rest/v0/camera/"+b.GUID()+"/snapshot?"+(new Date).getTime()}return"/img/webcam-default.png"},a.SetExternalTrigger=function(b,c){b?(a.Zone.Options.externalActivate=c,console.log("Activate",a.ActivateTrigger)):(a.Zone.Options.externalDeactivate=c,console.log("Deactivate",a.DeactivateTrigger))},a.SetActivateTrigger=function(b){a.SetExternalTrigger(!0,b)},a.SetDeactivateTrigger=function(b){a.SetExternalTrigger(!1,b)},a.Delete=function(){a.Zone.Delete(),a.setRoute("/")},a.AddNewTrigger=function(){var b=new h({zone:a.Zone,name:"My Trigger",type:"PIR"});g.Trigger=b,a.setRoute("/configureTrigger")},a.EditTrigger=function(b){g.Trigger=b,a.setRoute("/configureTrigger")},a.HasTriggers=function(){return a.Zone.Triggers.length>0},a.ToggleExtra=function(){}}]),"use strict",yeomanApp.controller("UtilitybarCtrl",["$scope","$rootScope","$http","$location","UIEvents","ZoneService",function(a,b,c,d,e,f){a.IsOnHomepage=function(){return d.$$path=="/"},a.HasZones=function(){return f.Zones.length>0},a.IsOverrideNull=function(){return b.Override===null},a.IsOverrideFalse=function(){return b.Override===!1},a.SetOverride=function(d){if(d!==null){var f={override:d};c.put("/override",f).success(function(c){DEBUG&&console.log("PUT /override",c),b.Override=d,b.$broadcast(e.OverrideUpdate,a.Override)}).error(function(a){DEBUG&&console.log("PUT /override",a)})}else c.delete("/override").success(function(c){b.Override=null,b.$broadcast(e.OverrideUpdate,a.Override)})}}]),"use strict",yeomanApp.controller("AlertsCtrl",["$scope","$rootScope","AlertService","AlertFactory","EditAlertService",function(a,b,c,d,e){a.Alerts=c.Alerts,a.AddAlert=function(){var b=new d;e.Alert=b,a.setRoute("/configureAlert")},a.EditAlert=function(b){e.Alert=b,a.setRoute("/configureAlert")},a.Delete=function(a){DEBUG&&console.log("Deleting Alert",a),a.Delete()},a.Activate=function(a){a.Activate()},a.Deactivate=function(a){a.Deactivate()}}]),"use strict",yeomanApp.controller("ConfigureAlertCtrl",["$scope","EditAlertService","UIEvents",function(a,b,c){a.Alert=b.Alert,a.ErrorMessage="",a.Submitted=!1,a.Save=function(){a.Submitted=!0,a.configureAlert.$valid&&a.Alert.Save(function(){a.setRoute("/alerts")})},a.IsPhoneNumber=function(){return a.Alert.Options.type==="sms"||a.Alert.Options.type==="call"},a.$on(c.AlertUpdateFailed,function(b,c){DEBUG&&console.log("AlertUpdateFailed",c),a.ErrorMessage=c})}]),"use strict",yeomanApp.controller("HistoryCtrl",["$scope","$http",function(a,b){a.History=[],b.get("/history").success(function(b){a.History=b})}]),"use strict",yeomanApp.controller("TriggerCtrl",["$scope","$rootScope","UIEvents",function(a,b,c){}]),"use strict",yeomanApp.controller("RfListenerCtrl",["$scope","$rootScope","UIEvents",function(a,b,c){a.IsListening=!1,a.ListenEntries=[],a.Listen=function(b){a.IsListening=!0},a.Stop=function(){a.IsListening=!1,a.ListenEntries=[]},a.Clear=function(){a.Trigger.Options.data=null},a.FindEntry=function(b){for(var c=0;c<a.ListenEntries.length;c++){var d=a.ListenEntries[c];if(d.DA===b)return d}},a.RemoveEntry=function(b){var c=a.ListenEntries.indexOf(b);a.ListenEntries.splice(c,1)},a.SelectEntry=function(b){a.Stop()},b.$on(c.PusherData,function(b,c){a.$apply(function(){if(a.IsListening&&parseInt(c.D,10)===11){var b=a.FindEntry(c.DA);if(b){var d=a.ListenEntries.indexOf(b);a.ListenEntries[d].Count++}else{var e={DA:c.DA,Count:1};a.ListenEntries.push(e)}}})})}]),"use strict",yeomanApp.controller("ConfigureTriggerCtrl",["$scope","$rootScope","UIEvents","EditTriggerService","EditZoneService","AlertFactory","EditAlertService","AlertService",function(a,b,c,d,e,f,g,h){a.Zone=e.Zone,a.Trigger=d.Trigger,a.Alerts=h.Alerts,a.Submitted=!1,(a.Zone.id===null||a.Zone.id===undefined)&&a.setRoute("/"),a.Save=function(){a.Submitted=!0,a.configureTrigger.$valid&&a.Trigger.Save(function(){if(a.Alerts.length===0){var b=new f({type:"sms"});g.Alert=b,a.setRoute("/configureAlert")}else a.setRoute("/editZone")})},a.Delete=function(){a.Trigger.Delete(function(){a.setRoute("/editZone")})},a.IsListening=!1,a.ListenEntries=[],a.Listen=function(b){a.IsListening=!0},a.Stop=function(){a.IsListening=!1,a.ListenEntries=[]},a.Clear=function(){a.Trigger.Options.data=null},b.$on(c.PusherData,function(b,c){a.$apply(function(){if(a.IsListening&&parseInt(c.D,10)===11){var b=a.FindEntry(c.DA);if(b){var d=a.ListenEntries.indexOf(b);a.ListenEntries[d].Count++}else{var e={DA:c.DA,Count:1};a.ListenEntries.push(e)}}})}),a.FindEntry=function(b){for(var c=0;c<a.ListenEntries.length;c++){var d=a.ListenEntries[c];if(d.DA===b)return d}},a.RemoveEntry=function(b){var c=a.ListenEntries.indexOf(b);a.ListenEntries.splice(c,1)},a.SelectEntry=function(b){a.Trigger.Options.data=b.DA,a.Stop()},a.RemoveEntryByDataString=function(b){for(var c=0;c<a.ListenEntries.length;c++){var d=a.ListenEntries[c];if(d.DA===b){a.RemoveEntry(d);break}}},a.GetDetectedValueFromEntries=function(){for(var b=0;b<a.ListenEntries.length;b++){var c=a.ListenEntries[b];if(c.Count>=3)return c}}}]),"use strict",yeomanApp.factory("ZoneFactory",["$rootScope","$http","UIEvents","NinjaUtilities","TriggerFactory",function(a,b,c,d,e){return function(f){this.id=null,this.Triggers=[],this.Options={name:"",triggers:{},externalActivate:"",externalDeactivate:"",overrideActive:!0,webcams:[]},this.Options=d.ObjectMerge(this.Options,f);var g=function(){this.Options.id&&(this.id=this.Options.id,delete this.Options.id);if(this.Options.triggers){var a=d.ObjectArrayToArray(this.Options.triggers,"data");for(var b=0;b<a.length;b++){var c=a[b];c.zone=this;var f=new e(c);this.Triggers.push(f)}delete this.Options.triggers}}.bind(this);return g(),this.Save=function(d){DEBUG&&console.log("Zone.Save()"),this.id?b.put("/zone/"+this.id,this.Options,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).success(function(b){DEBUG&&console.log("SaveZone Existing:",b),a.$broadcast(c.ZoneUpdated,this),d&&d(b)}):b.post("/zone",this.Options,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).success(function(b){DEBUG&&console.log("SaveZone New:",b),this.id=b.id,a.$broadcast(c.ZoneAdded,this),d&&d(b)}.bind(this))},this.Delete=function(d){this.id&&b.delete("/zone/"+this.id).success(function(b){DEBUG&&console.log("DeleteZone:",b,this),a.$broadcast(c.ZoneRemoved,this),d&&d(b)}.bind(this))},this.Refresh=function(a){this.id&&b.get("/zone/"+this.id).success(function(b){DEBUG&&console.log("GetZone:",b),a&&a(b)})},this.HasTrigger=function(a){var b=!1;for(var c=0;c<this.Triggers.length;c++){var d=this.Triggers[c];if(d.Options.data===a.Options.data){b=!0;break}}return b},this.SetOverride=function(a){var c={overrideActive:a};b.put("/zone/"+this.id,c).success(function(b){this.Options.overrideActive=a,DEBUG&&console.log("Zone.SetOverride",a)}.bind(this))},this.HasWebcam=function(a){var b=a.GUID(),c=this.Options.webcams.indexOf(b)>=0;return c},this.HasAnyWebcam=function(){return this.Options.webcams.length>=1},this.RemoveWebcam=function(a){var b=a.GUID(),c=this.Options.webcams.indexOf(b);c>=0&&this.Options.webcams.splice(c,1)},a.$on(c.TriggerRemoved,function(b,c){if(this.id===c.Zone.id){DEBUG&&console.log("TriggerRemoved:",c);var d=this.Triggers.indexOf(c);console.log("Removing Trigger ",d),this.Triggers.splice(d,1),a.$watch()}}.bind(this)),a.$on(c.TriggerAdded,function(b,c){this.id===c.Zone.id&&(DEBUG&&console.log("TriggerAdded:",c),this.HasTrigger(c)||(this.Triggers.push(c),a.$watch()))}.bind(this)),this}}]),"use strict",yeomanApp.factory("TriggerFactory",["$rootScope","$http","UIEvents","NinjaUtilities",function(a,b,c,d){return function(e){this.Zone=null,this.Options={name:"",data:"",type:""},this.Options=d.ObjectMerge(this.Options,e);var f=function(){this.Options.id&&(this.id=this.Options.id,delete this.Options.id),this.Options.zone&&(this.Zone=this.Options.zone,delete this.Options.zone),this.Options.Zone&&(this.Zone=this.Options.Zone,delete this.Options.Zone)}.bind(this);f(),this.IsValid=function(){var a=!0;return this.Options.type||(a=!1),this.Options.name||(a=!1),this.Options.data||(a=!1),this.Zone.id||(a=!1),a},this.Save=function(d){DEBUG&&console.log("Trigger.Save()",this);if(this.IsValid()){var e=this.Options;return b.put("/zone/"+this.Zone.id+"/trigger",e).success(function(b){a.$broadcast(c.TriggerAdded,this),d&&d(b)}.bind(this)).error(function(a){DEBUG&&console.log("Error:",a),d&&d(a)}),!0}return DEBUG&&console.log("Trigger not valid for saving"),!1},this.Delete=function(d){DEBUG&&console.log("Trigger.Delete()",this);var e=this;b.delete("/zone/"+this.Zone.id+"/trigger/"+this.Options.data).success(function(b){a.$broadcast(c.TriggerRemoved,e),d&&d(b)}).error(function(a){DEBUG&&console.log("Error:",a),d&&d(a)})}}}]),"use strict",yeomanApp.factory("AlertFactory",["$rootScope","$http","UIEvents","NinjaUtilities",function(a,b,c,d){return function(e){this.id=null,this.Options={type:"",alertee:"",active:!0},this.Options=d.ObjectMerge(this.Options,e);var f=function(){this.Options.id&&(this.id=this.Options.id,delete this.Options.id)}.bind(this);f(),this.Save=function(d){DEBUG&&console.log("Alert.Save()"),this.id?b.put("/alert/"+this.id,this.Options).success(function(b){DEBUG&&console.log("AlertFactory.Put",b),a.$broadcast(c.AlertUpdated,this),d&&d(b)}.bind(this)).error(function(b){DEBUG&&console.log("AlertFactory.Put Error:",b),a.$broadcast(c.AlertUpdateFailed,b.error)}):b.post("/alert",this.Options).success(function(b){b.id&&b.id.length>30&&(this.id=b.id,DEBUG&&console.log("AlertFactory.Post",b),a.$broadcast(c.AlertAdded,this),d&&d(b))}.bind(this)).error(function(b){DEBUG&&console.log("AlertFactory.Post Error:",b),a.$broadcast(c.AlertUpdateFailed,b.error)})},this.Delete=function(){b.delete("/alert/"+this.id).success(function(b){DEBUG&&console.log("Alert.Delete()",b),a.$broadcast(c.AlertRemoved,this)}.bind(this))},this.Activate=function(d){var e={active:!0};b.put("/alert/"+this.id,e).success(function(b){DEBUG&&console.log("Alert.Activate",b),a.$broadcast(c.AlertActivated),this.Options.active=!0,d&&d(b)}.bind(this))},this.Deactivate=function(d){var e={active:!1};b.put("/alert/"+this.id,e).success(function(b){DEBUG&&console.log("Alert.Activate",b),a.$broadcast(c.AlertActivated),this.Options.active=!1,d&&d(b)}.bind(this))}}}]),"use strict",yeomanApp.service("Config",["$rootScope","$location",function(a,b){var c={YEOMAN:"Yeoman",LOCALHOST:"Localhost",DERP:"Derp",STAGING:"Staging",PRODUCTION:"Production"},d={Mode:c.YEOMAN,Server:"http://localhost:8000",StreamServer:"http://localhost:8000"},e={Mode:c.LOCALHOST,Server:"",StreamServer:""},f={Mode:c.DERP,Server:"",StreamServer:""},g={Mode:c.STAGING,Server:"",StreamServer:""},h={Mode:c.PRODUCTION,Server:"",StreamServer:""},i=function(){var a;switch(b.$$host){case"localhost":b.$$port===3501?a=c.YEOMAN:b.$$port>=8e3&&(a=c.LOCALHOST);break;case"derp.local":a=c.DERP;break;case"staging.ninja.is":a=c.STAGING;break;default:a=c.PRODUCTION}return a};switch(i()){case c.YEOMAN:return d;case c.LOCALHOST:return e;case c.DERP:return f;case c.STAGING:return g;case c.PRODUCTION:return h}}]),"use strict",yeomanApp.service("NinjaService",["Config",function(a){var b={server:a.Server,streamServer:a.StreamServer,debug:!1};a.UserAccessToken&&a.UserAccessToken.length>0&&(b.userAccessToken=a.UserAccessToken);var c=new Ninja(b);return c}]),"use strict",yeomanApp.service("DeviceService",["$rootScope","$timeout","UIEvents","NinjaService","NinjaUtilities",function(a,b,c,d,e){var f={Devices:[],Blocks:[],LoadUserDevices:function(a){DEBUG&&console.log("LoadUserDevices"),d.User.GetDevices(this.SetUserDevices.bind(this)),a&&d.User.GetDevices(a)},FilterUserDevices:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c],e,f;if(parseInt(d.Options.deviceId)===30){e=this.GetDeviceByDeviceId(30,b),f=!1;for(var g=0;g<e.length;g++){var h=e[g];h.Options.port===d.Options.port&&(f=!0)}f||b.push(d)}else if(parseInt(d.Options.deviceId)===31){e=this.GetDeviceByDeviceId(31,b),f=!1;for(var g=0;g<e.length;g++){var h=e[g];h.Options.port===d.Options.port&&(f=!0)}f||b.push(d)}else b.push(d)}return b},SetUserDevices:function(b){this.Devices=this.FilterUserDevices(b.devices),this.Blocks=b.blocks,a.$broadcast(c.DevicesLoaded,this.Devices)},CreateAddDevice:function(b){var f=e.SplitGUID(b.GUID),g=this.GetCreateBlockByNodeId(f.nodeId),h=new d.Device({deviceId:f.deviceId,name:"New Device (TODO: Lookup)",vendor:b.V,port:b.G,value:b.DA,pusherData:b});g.RegisterDevice(h);var i=function(a){h.Options.rawData=a,h.Options.type=a.device_type,h.Options.name=a.default_name,h.Options.rawData.shortName=a.default_name};h.GetData(i.bind(this));var j=this.Devices.slice();j.push(h),j=this.FilterUserDevices(j),j.length!==this.Devices.length&&this.Devices.push(h),a.$apply(),a.$broadcast(c.IsotopeReLayout)},GetCreateBlockByNodeId:function(a){var b;if(this.Blocks)for(var c=0;c<this.Blocks.length;c++){var e=this.Blocks[c];e.Options.nodeId===a&&(b=e)}return b===undefined&&(b=new d.Block({nodeId:a}),this.Blocks.push(b)),b},GetDeviceByNodeId:function(a,b){var c=[];b||(b=this.Devices);if(b)for(var d=0;d<b.length;d++){var e=b[d];e.Options.block.Options.nodeId===a&&c.push(e)}return c},GetDeviceByGuid:function(a,b){b||(b=this.Devices);if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d.GUID()===a)return d}return null},GetDeviceByType:function(a,b){var c=[];b||(b=this.Devices);if(b)for(var d=0;d<b.length;d++){var e=b[d];e.Options.type===a&&c.push(e)}return c},GetDeviceByMode:function(a,b){var c=[];b||(b=this.Devices);if(b)for(var d=0;d<b.length;d++){var e=b[d];e.Options.mode===a&&c.push(e)}return c},GetDeviceByDeviceId:function(a,b){var c=[];b||(b=this.Devices);if(b)for(var d=0;d<b.length;d++){var e=b[d];parseInt(e.Options.deviceId)===parseInt(a)&&c.push(e)}return c},GetWebService:function(a,b){var c,e=this,f=this.GetDeviceByType(a);return f.length===0?d.User.CreateService(a,function(a,c){e.Devices.push(a),e.Blocks.push(c),b&&b(a)}):(c=f[0],b&&b(c)),c}};return a.$on(c.PusherData,function(a,b){var c=f.GetDeviceByGuid(b.GUID);c||f.CreateAddDevice(b)}),a.$on(c.DeviceRemoved,function(b,d){var e=f.GetDeviceByGuid(d.GUID()),g=f.Devices.indexOf(e);f.Devices.splice(g,1),a.$emit(c.IsotopeReLayout,d)}),f}]),"use strict",yeomanApp.service("NinjaUtilities",function(){return Ninja.Utilities}),"use strict",yeomanApp.service("PusherService",["$rootScope","UIEvents","NinjaService","UserService",function(a,b,c,d){var e,f;a.$on(b.UserInfoLoaded,function(c,d){if(d.error)return;var g=d.pusherKey;e=new Pusher(g),f=e.subscribe(d.pusherChannel),e.log=function(a){console.log(a)};var h=function(c){a.$broadcast(b.PusherHeartbeat,c)},i=function(c){a.$broadcast(b.PusherData,c)},j=function(c){a.$broadcast(b.PusherStream,c)},k=function(c){switch(c.type){case"NODE_ACTIVATION":break;case"PLUGIN":a.$broadcast(b.DevicePlugin,c);break;case"UNPLUG":a.$broadcast(b.DeviceUnplug,c);break;default:a.$broadcast(b.PusherConfig,c)}};f.bind("heartbeat",h),f.bind("data",i),f.bind("stream",j),f.bind("config",k)})}]),"use strict",yeomanApp.service("UIEvents",function(){var a={PusherData:"PusherData",PusherHeartbeat:"PusherHeartbeat",PusherConfig:"PusherConfig",PusherStream:"PusherStream",ConfigureMode:"ConfigureMode",UserIsLoggedIn:"UserIsLoggedIn",UserIsLoggedOut:"UserIsLoggedOut",UserStatusChecked:"UserStatusChecked",UserLoggingIn:"UserLoggingIn",UserLogin:"UserLogin",UserLoginFailed:"UserLoginFailed",UserLoggingOut:"UserLoggingOut",UserLogout:"UserLogout",UserLogoutFailed:"UserLogoutFailed",UserInfoLoading:"UserInfoLoading",UserInfoLoaded:"UserInfoLoaded",UserInfoLoadFailed:"UserInfoLoadFailed",TopBarOpen:"TopBarOpen",TopBarClose:"TopBarClose",DevicePlugin:"DevicePlugin",DeviceUnplug:"DeviceUnplug",DevicesLoading:"DevicesLoading",DevicesLoaded:"DevicesLoaded",DevicesLoadFailed:"DevicesLoadFailed",DeviceRemoving:"DeviceRemoving",DeviceRemoved:"DeviceRemoved",DeviceRemoveFailed:"DeviceRemoveFailed",SetDeviceType:"SetDeviceType",ServiceUpdated:"ServiceUpdated",ZoneAdding:"ZoneAdding",ZoneAdded:"ZoneAdded",ZoneAddFailed:"ZoneAddFailed",ZoneEditing:"ZoneEditing",ZoneEdited:"ZoneEdited",ZoneEditFailed:"ZoneEditFailed",ZoneUpdating:"ZoneUpdating",ZoneUpdated:"ZoneUpdated",ZoneUpdateFailed:"ZoneUpdateFailed",ZoneSaving:"ZoneSaving",ZoneSaved:"ZoneSaved",ZoneSaveFailed:"ZoneSaveFailed",ZoneRemoving:"ZoneRemoving",ZoneRemoved:"ZoneRemoved",ZoneRemoveFailed:"ZoneRemoveFailed",TriggerAdding:"TriggerAdding",TriggerAdded:"TriggerAdded",TriggerAddFailed:"TriggerAddFailed",TriggerRemoving:"TriggerRemoving",TriggerRemoved:"TriggerRemoved",TriggerRemoveFailed:"TriggerRemoveFailed",OverrideUpdate:"OverrideUpdate",AlertAdding:"AlertAdding",AlertAdded:"AlertAdded",AlertAddFailed:"AlertAddFailed",AlertUpdating:"AlertUpdating",AlertUpdated:"AlertUpdated",AlertUpdateFailed:"AlertUpdateFailed",AlertRemoving:"AlertRemoving",AlertRemoved:"AlertRemoved",AlertRemoveFailed:"AlertRemoveFailed",AlertActivated:"AlertActivated",AlertDeactivated:"AlertDeactivated"};return a}),"use strict",yeomanApp.factory("UserService",["$rootScope","$q","$http","Config","UIEvents","NinjaService",function(a,b,c,d,e,f){var g={InfoDeferred:b.defer(),GetInfo:function(){f.User.GetInfo(this.GetInfo_Handler.bind(this))},GetInfo_Handler:function(b){this.Info=b,a.$broadcast(e.UserInfoLoaded,b),this.InfoDeferred.resolve(b)},Info:{},GetLoginStatus:function(){f.User.GetInfo(this.GetLoginStatus_Handler.bind(this))},GetLoginStatus_Handler:function(b){b.error?(this.IsLoggedIn=!1,a.$broadcast(e.UserStatusChecked,this.IsLoggedIn)):(this.IsLoggedIn=!0,a.$broadcast(e.UserStatusChecked,this.IsLoggedIn))},IsLoggedIn:!1,Login:function(b,f){var g={email:b,password:f,rememberme:!1,redirect:"/alpha/"};c.post(d.Server+"/signin",g).success(function(b){b.result===1&&(DEBUG&&console.log("Login()",this),a.$broadcast(e.UserLogin),this.IsLoggedIn=!0)}.bind(this)).error(function(b){a.$broadcast(e.UserLoginFailed,b),this.IsLoggedIn=!1}.bind(this))},Logout:function(){c.get(d.Server+"/signout").success(function(b){a.$broadcast(e.UserLogout),DEBUG&&console.log("Logout():",this),this.IsLoggedIn=!1}.bind(this)).error(function(b){a.$broadcast(e.UserLogoutFailed)})}};return g}]),"use strict",yeomanApp.factory("ZoneService",["$rootScope","$http","UIEvents","NinjaUtilities","ZoneFactory",function(a,b,c,d,e){var f={Zones:[],GetZones:function(a){b.get("/zone").success(function(b){DEBUG&&console.log("GetZones:",b);var c=d.ObjectArrayToArray(b);this.Zones=this.InstantiateZones(c),a&&a(b)}.bind(this)).error(function(b){DEBUG&&console.log("GetZones (FAILED):",b),a&&a(b)}.bind(this))},InstantiateZones:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c],e=this.InstantiateZone(d);b.push(e)}return b},InstantiateZone:function(a){var b=new e(a);return b},GetZone:function(a,c){b.get("/zone/"+a).success(function(a){DEBUG&&console.log("GetZone:",a),c&&c(a)})},SaveZone:function(a,c){a.id?b.put("/zone/"+a.id,a.Options,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).success(function(a){DEBUG&&console.log("SaveZone Existing:",a),c&&c(a)}):b.post("/zone",a.Options,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).success(function(a){DEBUG&&console.log("SaveZone New:",a),c&&c(a)})},DeleteZone:function(a,c){a.id&&b.delete("/zone/"+a.id).success(function(b){DEBUG&&console.log("DeleteZone:",b,a)})}};return a.$on(c.ZoneRemoved,function(a,b){DEBUG&&console.log("ZoneRemoved watch",b);var c=f.Zones.indexOf(b);f.Zones.splice(c,1)}),a.$on(c.ZoneAdded,function(a,b){DEBUG&&console.log("ZoneAdded watch",b),f.Zones.push(b)}),f}]),"use strict",yeomanApp.factory("EditZoneService",["ZoneFactory",function(a){var b={Zone:null,Reset:function(){this.Zone=new a}};return b.Reset(),b}]),"use strict",yeomanApp.factory("EditTriggerService",["TriggerFactory",function(a){var b={Trigger:null,Reset:function(){this.Trigger=new a}};return b.Reset(),b}]),"use strict",yeomanApp.factory("AlertService",["$rootScope","$http","UIEvents","NinjaUtilities","AlertFactory",function(a,b,c,d,e){var f={Alerts:[],GetAlerts:function(a){b.get("/alert").success(function(b){DEBUG&&console.log("GetAlerts:",b);var c=d.ObjectArrayToArray(b);this.Alerts=this.InstantiateAlerts(c),a&&a(b)}.bind(this)).error(function(b){DEBUG&&console.log("GetAlerts (FAILED)",b),a&&a(b)}.bind(this))},InstantiateAlerts:function(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c],e=this.InstantiateAlert(d);b.push(e)}return b},InstantiateAlert:function(a){var b=new e(a);return b}};return a.$on(c.AlertRemoved,function(a,b){DEBUG&&console.log("AlertRemoved watch",b);var c=f.Alerts.indexOf(b);f.Alerts.splice(c,1)}),a.$on(c.AlertAdded,function(a,b){DEBUG&&console.log("AlertAdded watch",b),f.Alerts.push(b)}),f}]),"use strict",yeomanApp.factory("EditAlertService",["AlertFactory",function(a){var b={Alert:null,Reset:function(){this.Alert=new a}};return b.Reset(),b}]),"use strict",yeomanApp.filter("rfHex",["$filter",function(a){return function(a){if(a){var b=parseInt(a,2);return b.toString(16)}return""}}]),"use strict",yeomanApp.filter("propercase",function(){return function(a){var b=a.split(" "),c=new Array;for(var d in b){var e=b[d].charAt(0).toUpperCase()+b[d].substr(1).toLowerCase();c.push(e)}var f=c.join(" ").trim();return f}}),"use strict",yeomanApp.filter("momentTime",function(){return function(a){return moment(a)}}),yeomanApp.filter("fromNow",function(){return function(a){return moment(a).fromNow()}}),"use strict",yeomanApp.directive("foundationHeader",["UIEvents",function(a){var b="expanded";return{restrict:"A",link:function(d,e,f){d.$on(a.TopBarOpen,function(a){e.addClass(b)}),d.$on(a.TopBarClose,function(a){e.removeClass(b),e.removeAttr("style"),e.foundationTopBar("reset")})}}}]),"use strict",yeomanApp.directive("triggerListen",["$rootScope","UIEvents",function(a,b){var c="hsl(195,46%,70%)";c="hsl(48,83%,76%)";var d=6e3;return{restrict:"A",link:function(d,e,f){a.$on(b.PusherData,function(a,b){if(d.trigger.Options.data===b.DA){e.stop(!0,!1),e.animate({backgroundColor:"hsl(353,77%,57%)"},100).spectrum(["#e59191","#edecb2","#daeaba","transparent"],[100,6e4,6e4,6e4]);var c=new moment(b.timestamp);e.find(".lastActuated").html(c.format("YYYY-MM-DD h:mm:ssa"))}})}}}]),"use strict",yeomanApp.directive("nbClick",function(){return{restrict:"A",link:function(b,c,d){var e=!1,f=!1;c.bind("touchstart click",function(){f||(f=!0,setTimeout(function(){f=!1,b.$apply(d.nbClick)},100)),e=!0})}}}),"use strict",yeomanApp.directive("stopPropagation",function(){return{restrict:"A",link:function(b,c,d){c.click(function(a){return a.stopPropagation(),!1})}}}),"use strict",yeomanApp.directive("itoggle",function(){return{restrict:"A",link:function(b,c,d){c.iToggle({easing:"swing"});var e=function(){}}}}),"use strict",yeomanApp.directive("ngTap",function(){return{restrict:"A",link:function(b,c,d){var e=!1;Modernizr.touch?(c.bind("touchstart",function(a){e=!0}),c.bind("touchmove",function(a){e=!1}),c.bind("touchend",function(a){e&&b.$apply(d.ngTap)})):c.bind("click",function(a){b.$apply(d.ngTap)})}}}),"use strict",yeomanApp.directive("toggle",function(){return{restrict:"A",link:function(b,c,d){function g(){jQuery(f).toggle(),jQuery(f).css("display")==="block"?c.find(".arrow").addClass("open").removeClass("closed"):c.find(".arrow").addClass("closed").removeClass("open")}c.css({cursor:"pointer"});var e=!1,f=d.toggle;Modernizr.touch?(c.bind("touchstart",function(a){e=!0}),c.bind("touchmove",function(a){e=!1}),c.bind("touchend",function(a){e&&b.$apply(g)})):c.bind("click",function(a){b.$apply(g)})}}}),"use strict",yeomanApp.directive("selectTo",function(){return{restrict:"A",link:function(b,c,d){var e=!1,f=d.selectTo,g=function(){b[f](b.entry.DA)};Modernizr.touch?(c.bind("touchstart",function(a){e=!0}),c.bind("touchmove",function(a){e=!1}),c.bind("touchend",function(a){e&&b.$apply(g)})):c.bind("click",function(a){b.$apply(g)})}}}),"use strict",yeomanApp.controller("EditZoneWebcamsCtrl",["$scope","$rootScope","EditZoneService","WebcamService","UIEvents","DeviceService",function(a,b,c,d,e,f){a.Zone=c.Zone,a.Webcams=d.Webcams,a.ToggleWebcam=function(b){var c=b.GUID();a.Zone.HasWebcam(b)?a.Zone.RemoveWebcam(b):a.Zone.Options.webcams.push(c)},b.$on(e.DevicesLoaded,function(b){a.$apply(function(){a.Webcams=f.GetDeviceByType("webcam")})})}]),"use strict",yeomanApp.factory("WebcamService",["$rootScope","DeviceService","UIEvents",function(a,b,c){var d={Webcams:b.GetDeviceByType("webcam")};return a.$on(c.DevicesLoaded,function(a){d.Webcams=b.GetDeviceByType("webcam")}),d}]),"use strict",yeomanApp.directive("webcamPlay",function(){return{restrict:"A",link:function(b,c,d){var e=!1,f=!1,g=b.Webcam.GUID();Modernizr.touch?(c.bind("touchstart",function(a){e=!0}),c.bind("touchmove",function(a){e=!1}),c.bind("touchend",function(a){e&&(f?f=!0:f=!1)})):c.bind("click",function(a){}),c.onLoad=function(){}}}}),"use strict",yeomanApp.directive("playWebcam",["$timeout",function(a){return{restrict:"A",link:function(c,d,e){a(function(){var a=jQuery(e.playWebcam),b=e.playWebcamSrc;DEBUG&&console.log("Play for",a,b),a.attr("src",c[b]());var f=function(){a.attr("src",c[b]()),a.imagesLoaded(f)},g=function(){$.removeData(a,"imagesLoaded")},h=!1,i=!1;Modernizr.touch?(d.bind("touchstart",function(a){i=!0}),d.bind("touchmove",function(a){i=!1}),d.bind("touchend",function(a){i&&c.$apply(function(){h=!h,h?(d.addClass("pause").removeClass("foundicon-youtube"),f()):(d.removeClass("pause").addClass("foundicon-youtube"),g())})})):d.bind("click",function(d){c.$apply(function(){h=!h,h&&a.imagesLoaded(function(){a.attr("src",b)})})})})}}}]);